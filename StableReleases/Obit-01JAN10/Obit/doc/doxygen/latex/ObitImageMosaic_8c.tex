\section{Obit\-Image\-Mosaic.c File Reference}
\label{ObitImageMosaic_8c}\index{ObitImageMosaic.c@{ObitImageMosaic.c}}
{\bf Obit\-Image\-Mosaic}{\rm (p.\,\pageref{structObitImageMosaic})} class function definitions. 

{\tt \#include \char`\"{}Obit\-Image\-Mosaic.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-IOImage\-FITS.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-IOImage\-AIPS.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-System.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Image\-Util.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVUtil.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-AIPSDir.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UV.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Sky\-Geom.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Table\-VZ.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Table\-SUUtil.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-PBUtil.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-FFT.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Mem.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf MAXFLD}\ 4096
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Obit\-Image\-Mosaic\-Init} (gpointer in)
\begin{CompactList}\small\item\em Private: Initialize newly instantiated object. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Clear} (gpointer in)
\begin{CompactList}\small\item\em Private: Deallocate members. \item\end{CompactList}\item 
{\bf Obit\-Image\-Mosaic} $\ast$ {\bf new\-Obit\-Image\-Mosaic} (gchar $\ast$name, {\bf olong} number)
\begin{CompactList}\small\item\em Public: Constructor. \item\end{CompactList}\item 
{\bf Obit\-Image\-Mosaic} $\ast$ {\bf Obit\-Image\-Mosaic\-From\-Info} (gchar $\ast$prefix, {\bf Obit\-Info\-List} $\ast$in\-List, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create Image\-Mosaic object from description in an {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. \item\end{CompactList}\item 
gconstpointer {\bf Obit\-Image\-Mosaic\-Get\-Class} (void)
\begin{CompactList}\small\item\em Public: Class\-Info pointer. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Zap\-Image} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf olong} number, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Zap specified image. \item\end{CompactList}\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Mosaic\-Get\-Image} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf olong} number, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Return specified image. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Set\-Image} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf olong} number, {\bf Obit\-Image} $\ast$image, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Set specified image. \item\end{CompactList}\item 
{\bf ofloat} {\bf Obit\-Image\-Mosaic\-Get\-Image\-RMS} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf olong} number, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Return RMS pixel value of image. \item\end{CompactList}\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Mosaic\-Get\-Full\-Image} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: return Full Field image image. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Set\-Full\-Image} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-Image} $\ast$image, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Set Full Field image. \item\end{CompactList}\item 
{\bf Obit\-Image\-Mosaic} $\ast$ {\bf Obit\-Image\-Mosaic\-Copy} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-Image\-Mosaic} $\ast$out, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Copy (shallow) constructor. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Set\-Files} ({\bf Obit\-Image\-Mosaic} $\ast$in, gboolean do\-Beam, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Set underlying files. \item\end{CompactList}\item 
{\bf Obit\-Image\-Mosaic} $\ast$ {\bf Obit\-Image\-Mosaic\-Create} (gchar $\ast$name, {\bf Obit\-UV} $\ast$uv\-Data, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create Mosaic from uv data. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Define} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-UV} $\ast$uv\-Data, gboolean do\-Beam, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Define parameters of images. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Add\-Field} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-UV} $\ast$uv\-Data, {\bf olong} nx, {\bf olong} ny, {\bf olong} nplane, {\bf ofloat} RAShift, {\bf ofloat} Dec\-Shift, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Add field to mosaic. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Flatten} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Flatten tiles onto full field image. \item\end{CompactList}\item 
{\bf ofloat} {\bf Obit\-Image\-Mosaic\-FOV} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Give field of view. \item\end{CompactList}\item 
{\bf ofloat} {\bf Obit\-Image\-Mosaic\-Max\-FOV} ({\bf Obit\-Image\-Mosaic} $\ast$in, {\bf olong} $\ast$start\-CC, {\bf olong} $\ast$end\-CC, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Give max. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Max\-CC} ({\bf Obit\-Table\-CC} $\ast$CCTab, {\bf olong} nccpos, {\bf ofloat} radius, {\bf ofloat} $\ast$maxcmp, {\bf ofloat} $\ast$xcenter, {\bf ofloat} $\ast$ycenter, {\bf ofloat} $\ast$xoff, {\bf ofloat} $\ast$yoff, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Get max summed CC and determine offset from nearest pixel. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Flag\-CC} ({\bf Obit\-Table\-CC} $\ast$CCTab, {\bf olong} nccpos, {\bf ofloat} radius, {\bf ofloat} xcenter, {\bf ofloat} ycenter, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Zero selected CC entries. \item\end{CompactList}\item 
{\bf Obit\-Image\-Mosaic} $\ast$ {\bf Obit\-Image\-Mosaic\-Max\-Field} ({\bf Obit\-Image\-Mosaic} $\ast$mosaic, {\bf ofloat} Min\-Flux, {\bf olong} $\ast$ignore, {\bf olong} $\ast$field, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Generate a mosaic for peeling. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Get\-Info} ({\bf Obit\-Image\-Mosaic} $\ast$in, gchar $\ast$prefix, {\bf Obit\-Info\-List} $\ast$out\-List, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Extract information about underlying structures to {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Mosaic\-Class\-Init} (void)
\begin{CompactList}\small\item\em Public: Class initializer. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
{\bf Obit\-Image\-Mosaic}{\rm (p.\,\pageref{structObitImageMosaic})} class function definitions. 

This class is derived from the {\bf Obit}{\rm (p.\,\pageref{structObit})} base class.

This class contains an array of associated astronomical images.

\subsection{Define Documentation}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!MAXFLD@{MAXFLD}}
\index{MAXFLD@{MAXFLD}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define MAXFLD\ 4096}\label{ObitImageMosaic_8c_a0}




\subsection{Function Documentation}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!newObitImageMosaic@{newObitImageMosaic}}
\index{newObitImageMosaic@{newObitImageMosaic}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image\-Mosaic}$\ast$ new\-Obit\-Image\-Mosaic (gchar $\ast$ {\em name}, {\bf olong} {\em number})}\label{ObitImageMosaic_8c_a11}


Public: Constructor. 

Initializes class if needed on first call. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]An optional name for the object. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the new object. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicAddField@{ObitImageMosaicAddField}}
\index{ObitImageMosaicAddField@{ObitImageMosaicAddField}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Add\-Field ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-UV} $\ast$ {\em uv\-Data}, {\bf olong} {\em nx}, {\bf olong} {\em ny}, {\bf olong} {\em nplane}, {\bf ofloat} {\em RAShift}, {\bf ofloat} {\em Dec\-Shift}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a24}


Public: Add field to mosaic. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object with images \item[{\em uv\-Data}]UV data from which the images are to be made. \item[{\em nx}]Number of pixels in X for image, will be converted to next larger good FFT size. \item[{\em ny}]Number of pixels in Y for image \item[{\em nplane}]Number of planes for image \item[{\em RAShift}]RA shift (asec) for image \item[{\em Dec\-Shift}]Dec shift (asec) for image \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicClassInit@{ObitImageMosaicClassInit}}
\index{ObitImageMosaicClassInit@{ObitImageMosaicClassInit}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Class\-Init (void)}\label{ObitImageMosaic_8c_a32}


Public: Class initializer. 

\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicClear@{ObitImageMosaicClear}}
\index{ObitImageMosaicClear@{ObitImageMosaicClear}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Clear (gpointer {\em inn})}\label{ObitImageMosaic_8c_a5}


Private: Deallocate members. 

Does (recursive) deallocation of parent class members. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em inn}]Pointer to the object to deallocate. Actually it should be an Obit\-Image\-Mosaic$\ast$ cast to an Obit$\ast$. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicCopy@{ObitImageMosaicCopy}}
\index{ObitImageMosaicCopy@{ObitImageMosaicCopy}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image\-Mosaic}$\ast$ Obit\-Image\-Mosaic\-Copy ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-Image\-Mosaic} $\ast$ {\em out}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a20}


Public: Copy (shallow) constructor. 

Parent class members are included but any derived class info is ignored. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object to copy \item[{\em out}]An existing object pointer for output or NULL if none exists. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to the new object. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicCreate@{ObitImageMosaicCreate}}
\index{ObitImageMosaicCreate@{ObitImageMosaicCreate}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image\-Mosaic}$\ast$ Obit\-Image\-Mosaic\-Create (gchar $\ast$ {\em name}, {\bf Obit\-UV} $\ast$ {\em uv\-Data}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a22}


Public: Create Mosaic from uv data. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]Name to be given to new object \item[{\em uv\-Data}]The object to create images in, Details are defined in info members: \begin{itemize}
\item File\-Type = Underlying file type, OBIT\_\-IO\_\-FITS, OBIT\_\-IO\_\-AIPS \item Name = Name of image, used as AIPS name or to derive FITS filename \item Class = Root of class, used as AIPS class or to derive FITS filename \item Seq = Sequence number \item Disk = Disk number for underlying files \item FOV = Field of view (deg) for Mosaic If $>$ 0.0 then a mosaic of images will be added to cover this region. Note: these are in addition to the NField fields added by other parameters \item do\-Full = if TRUE, create full field image to cover FOV [def. FALSE] \item NField = Number of fields defined in input, if unspecified derive from data and FOV \item \char`\"{}x\-Cells\char`\"{} = Cell spacing in X (asec) for all images, if unspecified derive from data \item \char`\"{}y\-Cells\char`\"{} = Cell spacing in Y (asec) for all images, if unspecified derive from data \item \char`\"{}BMAJ\char`\"{} = OBIT\_\-float scalar = Restoring beam major axis (asec) if = 0 then write fitted value to header \item \char`\"{}BMIN\char`\"{} = OBIT\_\-float scalar = Restoring beam minor axis (asec) \item \char`\"{}BPA\char`\"{} = OBIT\_\-float scalar = Restoring beam position angle (deg) \item \char`\"{}Beam\char`\"{} = OBIT\_\-float [3] = (BMAJ, BMIN, BPA) alternate form \item nx = Minimum number of cells in X for NField images if unspecified derive from data \item ny = Minimum number of cells in Y for NField images if unspecified derive from data \item RAShift = Right ascension shift (AIPS convention) for each field if unspecified derive from FOV and data \item Dec\-Shift = Declination for each field if unspecified derive from FOV and data \item Catalog = AIPSVZ format catalog for defining outliers, 'None'=don't use [default] 'Default' = use default catalog. Assumed in FITSdata disk 1. \item Outlier\-Dist = Maximum distance (deg) from center to include outlier fields from Catalog. [default 1 deg] \item Outlier\-Flux = Minimum estimated flux density include outlier fields from Catalog. [default 0.1 Jy ] \item Outlier\-SI = Spectral index to use to convert catalog flux density to observed frequency. [default = -0.75] \item Outlier\-Size = Width of outlier field in pixels. [default 50] \end{itemize}
\item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Newly created object. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicDefine@{ObitImageMosaicDefine}}
\index{ObitImageMosaicDefine@{ObitImageMosaicDefine}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Define ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-UV} $\ast$ {\em uv\-Data}, gboolean {\em do\-Beam}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a23}


Public: Define parameters of images. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object to create images in, Details are defined in members: \begin{itemize}
\item number\-Image - Number of images in Mosaic \item n\-Init - number of images already initialized \item images - Image array \item x\-Cells - Cell Spacing in X (deg) \item y\-Cells - Cell Spacing in Y (deg) \item nx - Number of pixels in X for each image \item ny - Number of pixels in Y for each image \item nplane - Number of planes for each image \item RAShift - RA shift (asec) for each image \item Dec\-Shift - Dec shift (asec) for each image \item file\-Type - Are image OBIT\_\-IO\_\-AIPS or OBIT\_\-IO\_\-FITS? \item im\-Name - Name of Mosaic images \item im\-Class - im\-Class \item im\-Seq - im\-Seq \item im\-Disk - im\-Disk \end{itemize}
\item[{\em uv\-Data}]UV data from which the images are to be made. Imaging information on uv\-Data: \begin{itemize}
\item \char`\"{}n\-Ch\-Avg\char`\"{} OBIT\_\-int (1,1,1) number of channels to average. This is for spectral line observations and is ignored if the IF axis on the uv data has more than one IF. Default is continuum = average all freq/IFs. 0=$>$ all. \item \char`\"{}rotate\char`\"{} OBIT\_\-float (?,1,1) Desired rotation on sky (from N thru E) in deg. [0] \end{itemize}
\item[{\em do\-Beam}]If true, make beam as well. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicFlagCC@{ObitImageMosaicFlagCC}}
\index{ObitImageMosaicFlagCC@{ObitImageMosaicFlagCC}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Flag\-CC ({\bf Obit\-Table\-CC} $\ast$ {\em CCTab}, {\bf olong} {\em nccpos}, {\bf ofloat} {\em radius}, {\bf ofloat} {\em xcenter}, {\bf ofloat} {\em ycenter}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a29}


Public: Zero selected CC entries. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em CCTab}]CC table object to filter. \item[{\em nccpos}]Number of CC to consider. \item[{\em radius}]Radius within which to consider components. (deg) \item[{\em xcenter}]delta X (ra) of brightest pixel (deg) \item[{\em ycenter}]delta Y (dec) of brightest pixel (deg) \item[{\em err}]Error/message stack \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicFlatten@{ObitImageMosaicFlatten}}
\index{ObitImageMosaicFlatten@{ObitImageMosaicFlatten}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Flatten ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a25}


Public: Flatten tiles onto full field image. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object with images \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicFOV@{ObitImageMosaicFOV}}
\index{ObitImageMosaicFOV@{ObitImageMosaicFOV}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf ofloat} Obit\-Image\-Mosaic\-FOV ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a26}


Public: Give field of view. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object with images \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the full width of the field of view in deg. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicFromInfo@{ObitImageMosaicFromInfo}}
\index{ObitImageMosaicFromInfo@{ObitImageMosaicFromInfo}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image\-Mosaic}$\ast$ Obit\-Image\-Mosaic\-From\-Info (gchar $\ast$ {\em prefix}, {\bf Obit\-Info\-List} $\ast$ {\em in\-List}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a12}


Public: Create Image\-Mosaic object from description in an {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. 

Initializes class if needed on first call. Also works for derived classes. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em prefix}]If Non\-Null, string to be added to beginning of in\-List entry name \char`\"{}xxx\char`\"{} in the following \item[{\em in\-List}]Info\-List to extract object information from \begin{itemize}
\item \char`\"{}xxxnumber\-Images\char`\"{} olong Number of images in Mosaic \item \char`\"{}xxxn\-Fly\-Eye\char`\"{} olong Number of images already initialized \item \char`\"{}xxx\-Imagennnnn\char`\"{} string Prefix for each image nnnnn (1-rel) in images \item \char`\"{}xxx\-Full\-Field\char`\"{} string Prefix for Full field image \item \char`\"{}xxx\-FOV\char`\"{} ofloat Field of view as radius (deg) \item \char`\"{}xxx\-Radius\char`\"{} ofloat Radius of the usable region of a given tile (cells) \item \char`\"{}xxxx\-Cells\char`\"{} ofloat Cell Spacing in X (deg) \item \char`\"{}xxxy\-Cells\char`\"{} ofloat Cell Spacing in Y (deg) \item \char`\"{}xxx\-Outlier\-Size\char`\"{} olong requested size (CLEAN window) of outliers \item \char`\"{}xxxnx\char`\"{} olong$\ast$ Number of pixels in X for each image \item \char`\"{}xxxny\char`\"{} olong$\ast$ Number of pixels in Y for each image \item \char`\"{}xxxnplane\char`\"{} olong$\ast$ Number of planes for each image \item \char`\"{}xxx\-RAShift\char`\"{} ofloat$\ast$ RA shift (deg) for each image \item \char`\"{}xxx\-Dec\-Shift\char`\"{} ofloat$\ast$ Dec shift (deg) for each image \item \char`\"{}xxxfile\-Type\char`\"{} olong Are image OBIT\_\-IO\_\-AIPS or OBIT\_\-IO\_\-FITS? \item \char`\"{}xxxim\-Name\char`\"{} string Name of Mosaic images \item \char`\"{}xxxim\-Class\char`\"{} string Class of Mosaic images \item \char`\"{}xxxim\-Seq\char`\"{} olong Sequence number of Mosaic images \item \char`\"{}xxxim\-Disk\char`\"{} olong$\ast$ Disk numbers of Mosaic images \item \char`\"{}xxxdo\-Full\char`\"{} boolean Is a full field image desired? \item \char`\"{}xxxbmaj\char`\"{} ofloat Restoring beam major axis in deg. \item \char`\"{}xxxbmin\char`\"{} ofloat Restoring beam minor axis in deg. \item \char`\"{}xxxbpa\char`\"{} ofloat Restoring beam PA in deg. \end{itemize}
\item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} for reporting errors. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the new object. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicGetClass@{ObitImageMosaicGetClass}}
\index{ObitImageMosaicGetClass@{ObitImageMosaicGetClass}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gconstpointer Obit\-Image\-Mosaic\-Get\-Class (void)}\label{ObitImageMosaic_8c_a13}


Public: Class\-Info pointer. 

\begin{Desc}
\item[Returns:]pointer to the class structure. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicGetFullImage@{ObitImageMosaicGetFullImage}}
\index{ObitImageMosaicGetFullImage@{ObitImageMosaicGetFullImage}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Mosaic\-Get\-Full\-Image ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a18}


Public: return Full Field image image. 

Returned reference has been Refed. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to the selected image. NULL on failure. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicGetImage@{ObitImageMosaicGetImage}}
\index{ObitImageMosaicGetImage@{ObitImageMosaicGetImage}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Mosaic\-Get\-Image ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf olong} {\em number}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a15}


Public: Return specified image. 

Returned reference has been Refed. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em number}]The 0-rel image number \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to the selected image. NULL on failure. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicGetImageRMS@{ObitImageMosaicGetImageRMS}}
\index{ObitImageMosaicGetImageRMS@{ObitImageMosaicGetImageRMS}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf ofloat} Obit\-Image\-Mosaic\-Get\-Image\-RMS ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf olong} {\em number}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a17}


Public: Return RMS pixel value of image. 

Ignores outer 5 pixel in image. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em number}]The 0-rel image number in array \item[{\em image}]Image reference to add \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicGetInfo@{ObitImageMosaicGetInfo}}
\index{ObitImageMosaicGetInfo@{ObitImageMosaicGetInfo}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Get\-Info ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, gchar $\ast$ {\em prefix}, {\bf Obit\-Info\-List} $\ast$ {\em out\-List}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a31}


Public: Extract information about underlying structures to {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Object of interest. \item[{\em prefix}]If Non\-Null, string to be added to beginning of out\-List entry name \char`\"{}xxx\char`\"{} in the following \item[{\em out\-List}]Info\-List to write entries into \begin{itemize}
\item \char`\"{}xxxnumber\-Images\char`\"{} olong Number of images in Mosaic \item \char`\"{}xxxn\-Fly\-Eye\char`\"{} olong Number of images already initialized \item \char`\"{}xxx\-Imagennnnn\char`\"{} string Prefix for each image nnnnn (1-rel) in images \item \char`\"{}xxx\-Full\-Field\char`\"{} string Prefix for Full field image \item \char`\"{}xxx\-FOV\char`\"{} ofloat Field of view as radius (deg) \item \char`\"{}xxx\-Radius\char`\"{} ofloat Radius of the usable region of a given tile (cells) \item \char`\"{}xxxx\-Cells\char`\"{} ofloat Cell Spacing in X (deg) \item \char`\"{}xxxy\-Cells\char`\"{} ofloat Cell Spacing in Y (deg) \item \char`\"{}xxx\-Outlier\-Size\char`\"{} olong requested size (CLEAN window) of outliers \item \char`\"{}xxxnx\char`\"{} olong$\ast$ Number of pixels in X for each image \item \char`\"{}xxxny\char`\"{} olong$\ast$ Number of pixels in Y for each image \item \char`\"{}xxxnplane\char`\"{} olong$\ast$ Number of planes for each image \item \char`\"{}xxx\-RAShift\char`\"{} ofloat$\ast$ RA shift (deg) for each image \item \char`\"{}xxx\-Dec\-Shift\char`\"{} ofloat$\ast$ Dec shift (deg) for each image \item \char`\"{}xxxfile\-Type\char`\"{} olong Are image OBIT\_\-IO\_\-AIPS or OBIT\_\-IO\_\-FITS? \item \char`\"{}xxxim\-Name\char`\"{} string Name of Mosaic images \item \char`\"{}xxxim\-Class\char`\"{} string Class of Mosaic images \item \char`\"{}xxxim\-Seq\char`\"{} olong Sequence number of Mosaic images \item \char`\"{}xxxim\-Disk\char`\"{} olong$\ast$ Disk number of Mosaic images \item \char`\"{}xxxdo\-Full\char`\"{} boolean Is a full field image desired? \item \char`\"{}xxxbmaj\char`\"{} ofloat Restoring beam major axis in deg. \item \char`\"{}xxxbmin\char`\"{} ofloat Restoring beam minor axis in deg. \item \char`\"{}xxxbpa\char`\"{} ofloat Restoring beam PA in deg. \end{itemize}
\item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} for reporting errors. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicInit@{ObitImageMosaicInit}}
\index{ObitImageMosaicInit@{ObitImageMosaicInit}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Init (gpointer {\em inn})}\label{ObitImageMosaic_8c_a4}


Private: Initialize newly instantiated object. 

Parent classes portions are (recursively) initialized first \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em inn}]Pointer to the object to initialize. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicMaxCC@{ObitImageMosaicMaxCC}}
\index{ObitImageMosaicMaxCC@{ObitImageMosaicMaxCC}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Max\-CC ({\bf Obit\-Table\-CC} $\ast$ {\em CCTab}, {\bf olong} {\em nccpos}, {\bf ofloat} {\em radius}, {\bf ofloat} $\ast$ {\em maxcmp}, {\bf ofloat} $\ast$ {\em xcenter}, {\bf ofloat} $\ast$ {\em ycenter}, {\bf ofloat} $\ast$ {\em xoff}, {\bf ofloat} $\ast$ {\em yoff}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a28}


Public: Get max summed CC and determine offset from nearest pixel. 

Also determines offset of peak from the central by a moment analysis. Routine translated from the AIPSish VLAUTIL.FOR/VLMXCC \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em CCTab}]CC table object to filter. \item[{\em nccpos}]Number of CC to consider. \item[{\em radius}]Radius within which to consider components. (deg) \item[{\em maxcmp}][out] Maximum summed CC flux in search radius. \item[{\em xcenter}][out] delta X (ra) of brightest pixel (deg) \item[{\em ycenter}][out] delta Y (dec) of brightest pixel (deg) \item[{\em xoff}][out] Offset from central pixel in x (ra) (deg) \item[{\em yoff}][out] Offset from central pixel in y (dec) (deg) \item[{\em err}]Error/message stack \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicMaxField@{ObitImageMosaicMaxField}}
\index{ObitImageMosaicMaxField@{ObitImageMosaicMaxField}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image\-Mosaic}$\ast$ Obit\-Image\-Mosaic\-Max\-Field ({\bf Obit\-Image\-Mosaic} $\ast$ {\em mosaic}, {\bf ofloat} {\em Min\-Flux}, {\bf olong} $\ast$ {\em ignore}, {\bf olong} $\ast$ {\em field}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a30}


Public: Generate a mosaic for peeling. 

Fields with 1-rel numbers in the zero terminated list ignore are ignored \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em mosaic}]Image\-Mosaic to process \item[{\em Min\-Flux}]Min. flux density for operation. \item[{\em ignore}]0 terminated list of 1-rel field numbers to ignore \item[{\em field}][out] the 1-rel number of the field copied \item[{\em err}]Error/message stack return Newly created Image\-Mosaic or NULL \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicMaxFOV@{ObitImageMosaicMaxFOV}}
\index{ObitImageMosaicMaxFOV@{ObitImageMosaicMaxFOV}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf ofloat} Obit\-Image\-Mosaic\-Max\-FOV ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf olong} $\ast$ {\em start\-CC}, {\bf olong} $\ast$ {\em end\-CC}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a27}


Public: Give max. 

Default is the mosaic FOV (if given) \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object with images \item[{\em start\-CC}]Array of starting component numbers \item[{\em end\-CC}]Array of ending component numbers \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the full width of the field of view in deg. \end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicSetFiles@{ObitImageMosaicSetFiles}}
\index{ObitImageMosaicSetFiles@{ObitImageMosaicSetFiles}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Set\-Files ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, gboolean {\em do\-Beam}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a21}


Public: Set underlying files. 

For AIPS files: Mosaic images have classes with the first character of the im\-Class followed by 'M', followed by 4 digits of the field number. The Beams are the same except that the second character is 'B'. The full field image has class im\-Class and 'F' as the 6th character.

For FITS files: Image classes are im\-Class+digits of the field Beam classes are the same except the second character is replaced with a 'B' (unless it already is 'B' in which case 'b' is used). The full field image has class im\-Class followed by 'Full'

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The object with images, Details are defined in members: \begin{itemize}
\item number\-Image - Number of images in Mosaic \item n\-Init - number of images already initialized \item images - Image array \item file\-Type - Are image OBIT\_\-IO\_\-AIPS or OBIT\_\-IO\_\-FITS? \item im\-Name - Name of Mosaic images \item im\-Class - im\-Class \item im\-Seq - im\-Seq \item im\-Disk - im\-Disk one per image \end{itemize}
\item[{\em do\-Beam}]If true, make beam as well. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicSetFullImage@{ObitImageMosaicSetFullImage}}
\index{ObitImageMosaicSetFullImage@{ObitImageMosaicSetFullImage}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Set\-Full\-Image ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf Obit\-Image} $\ast$ {\em image}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a19}


Public: Set Full Field image. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em image}]Image reference to add \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicSetImage@{ObitImageMosaicSetImage}}
\index{ObitImageMosaicSetImage@{ObitImageMosaicSetImage}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Set\-Image ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf olong} {\em number}, {\bf Obit\-Image} $\ast$ {\em image}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a16}


Public: Set specified image. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em number}]The 0-rel image number in array \item[{\em image}]Image reference to add \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}!ObitImageMosaicZapImage@{ObitImageMosaicZapImage}}
\index{ObitImageMosaicZapImage@{ObitImageMosaicZapImage}!ObitImageMosaic.c@{Obit\-Image\-Mosaic.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Mosaic\-Zap\-Image ({\bf Obit\-Image\-Mosaic} $\ast$ {\em in}, {\bf olong} {\em number}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageMosaic_8c_a14}


Public: Zap specified image. 

Also deletes any associated beam member \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]The array of images \item[{\em number}]The 0-rel image number, -1=$>$ all \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
