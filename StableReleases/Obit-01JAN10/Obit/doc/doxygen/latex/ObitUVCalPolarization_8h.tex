\section{Obit\-UVCal\-Polarization.h File Reference}
\label{ObitUVCalPolarization_8h}\index{ObitUVCalPolarization.h@{ObitUVCalPolarization.h}}
{\bf Obit\-UVCal}{\rm (p.\,\pageref{structObitUVCal})} utilities for applying polarization calibration to uv data. 

{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$math.h$>$}\par
{\tt \#include $<$glib.h$>$}\par
{\tt \#include \char`\"{}Obit.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Err.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVDesc.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVSel.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVCal.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Obit\-UVCal\-Polarization\-Init} ({\bf Obit\-UVCal} $\ast$in, {\bf Obit\-UVSel} $\ast$sel, {\bf Obit\-UVDesc} $\ast$desc, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Init baseline dependent calibration. \item\end{CompactList}\item 
void {\bf Obit\-UVCal\-Polarization} ({\bf Obit\-UVCal} $\ast$in, float time, {\bf olong} ant1, {\bf olong} ant2, {\bf ofloat} $\ast$RP, {\bf ofloat} $\ast$vis\-In, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Apply polarization calibration. \item\end{CompactList}\item 
void {\bf Obit\-UVCal\-Polarization\-Shutdown} ({\bf Obit\-UVCal} $\ast$in, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Shutdown polarization calibration. \item\end{CompactList}\item 
{\bf Obit\-UVCal\-Polarization\-S} $\ast$ {\bf Obit\-UVCal\-Polarization\-SUnref} ({\bf Obit\-UVCal\-Polarization\-S} $\ast$in)
\begin{CompactList}\small\item\em Public: Destroy polarization calibration structure . \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
{\bf Obit\-UVCal}{\rm (p.\,\pageref{structObitUVCal})} utilities for applying polarization calibration to uv data. 

This is implemented as utility routines and a separate Structure definition to avoid circular definitions. The {\bf Obit\-UVCal}{\rm (p.\,\pageref{structObitUVCal})} must be visible here but the structure needed for this calibration is a member of the {\bf Obit\-UVCal}{\rm (p.\,\pageref{structObitUVCal})}. If it were implemented as an {\bf Obit}{\rm (p.\,\pageref{structObit})} class this would lead to a circular definition which c cannot deal with.

\subsection{Function Documentation}
\index{ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}!ObitUVCalPolarization@{ObitUVCalPolarization}}
\index{ObitUVCalPolarization@{ObitUVCalPolarization}!ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-UVCal\-Polarization ({\bf Obit\-UVCal} $\ast$ {\em in}, float {\em time}, {\bf olong} {\em ant1}, {\bf olong} {\em ant2}, {\bf ofloat} $\ast$ {\em RP}, {\bf ofloat} $\ast$ {\em vis\-In}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitUVCalPolarization_8h_a1}


Public: Apply polarization calibration. 

For OBIT\_\-UVPoln\_\-VLBI and OBIT\_\-UVPoln\_\-ELORI, the parallactic angle correction is assumed to have already been applied. Polarization calibration structure, values in order: By IF (EIF-BIF+1) A 4x4 complex matrix to be multiplied by the observed polarization vector (RR,LL,RL,LR or XX,YY,XY,YX) to produce the corrected data. Adapted from the AIPSish DATPOL.FOR

Notes on parallactic angle: For VLA style calibration (OBIT\_\-UVPoln\_\-Approx), no correction is made to the data early on to remove the parallactic angle. In this case, the instrumental polarization is constant, i.e.correction terms are not a function of parallactic angle whereas the corrected data must have RL,LR rotated by the parallactic angle. The VLBI stype calibration (OBIT\_\-UVPoln\_\-ELORI, OBIT\_\-UVPoln\_\-VLBI) require that the data be corrected for the effects of parallactic angle prior to any self calibration. In this case, the polarization corrections rotate with parallactic angle but the corrected data need no further rotation. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Polarization Calibration Object. \item[{\em time}]Time of datum \item[{\em ant1}]first antenna number of baseline \item[{\em ant2}]second antanna of baseline. \item[{\em RP}]Random parameters array. \item[{\em vis\-In}]1 visibility as an array of floats \item[{\em err}]Obit\-Error stack. \end{description}
\end{Desc}
\index{ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}!ObitUVCalPolarizationInit@{ObitUVCalPolarizationInit}}
\index{ObitUVCalPolarizationInit@{ObitUVCalPolarizationInit}!ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-UVCal\-Polarization\-Init ({\bf Obit\-UVCal} $\ast$ {\em in}, {\bf Obit\-UVSel} $\ast$ {\em sel}, {\bf Obit\-UVDesc} $\ast$ {\em desc}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitUVCalPolarization_8h_a0}


Public: Init baseline dependent calibration. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Polarization Object. \item[{\em sel}]Data selector. \item[{\em desc}]Data descriptor. \item[{\em err}]Obit\-Error stack. \end{description}
\end{Desc}
\index{ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}!ObitUVCalPolarizationShutdown@{ObitUVCalPolarizationShutdown}}
\index{ObitUVCalPolarizationShutdown@{ObitUVCalPolarizationShutdown}!ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-UVCal\-Polarization\-Shutdown ({\bf Obit\-UVCal} $\ast$ {\em in}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitUVCalPolarization_8h_a2}


Public: Shutdown polarization calibration. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Polarization Object. \item[{\em err}]Obit\-Error stack. \end{description}
\end{Desc}
\index{ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}!ObitUVCalPolarizationSUnref@{ObitUVCalPolarizationSUnref}}
\index{ObitUVCalPolarizationSUnref@{ObitUVCalPolarizationSUnref}!ObitUVCalPolarization.h@{Obit\-UVCal\-Polarization.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-UVCal\-Polarization\-S}$\ast$ Obit\-UVCal\-Polarization\-SUnref ({\bf Obit\-UVCal\-Polarization\-S} $\ast$ {\em in})}\label{ObitUVCalPolarization_8h_a3}


Public: Destroy polarization calibration structure . 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Polarization Object. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]NULL \end{Desc}
