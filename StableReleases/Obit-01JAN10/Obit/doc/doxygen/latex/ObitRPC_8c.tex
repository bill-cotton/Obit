\section{Obit\-RPC.c File Reference}
\label{ObitRPC_8c}\index{ObitRPC.c@{ObitRPC.c}}
{\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} class function definitions. 

{\tt \#include \char`\"{}Obit\-RPC.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Obit\-RPCInit} (gpointer in)
\begin{CompactList}\small\item\em Private: Initialize newly instantiated object. \item\end{CompactList}\item 
void {\bf Obit\-RPCClear} (gpointer in)
\begin{CompactList}\small\item\em Private: Deallocate members. \item\end{CompactList}\item 
{\bf Obit\-RPC} $\ast$ {\bf new\-Obit\-RPC} (gchar $\ast$name)
\begin{CompactList}\small\item\em Public: Default Constructor. \item\end{CompactList}\item 
gconstpointer {\bf Obit\-RPCGet\-Class} (void)
\begin{CompactList}\small\item\em Public: Class\-Info pointer. \item\end{CompactList}\item 
{\bf Obit\-RPC} $\ast$ {\bf Obit\-RPCCreate\-Client} (gchar $\ast$name, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create/initialize client {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} structures. \item\end{CompactList}\item 
{\bf Obit\-RPC} $\ast$ {\bf Obit\-RPCCreate\-Server} (gchar $\ast$name, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create/initialize server {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} structures. \item\end{CompactList}\item 
{\bf Obit\-XML} $\ast$ {\bf Obit\-RPCCall} ({\bf Obit\-RPC} $\ast$client, gchar $\ast$server\-URL, {\bf Obit\-XML} $\ast$arg, {\bf Obit\-Info\-List} $\ast$$\ast$status, {\bf Obit\-Info\-List} $\ast$$\ast$request, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Send synchronous RPC request. \item\end{CompactList}\item 
void {\bf Obit\-RPCCall\-Snd} ({\bf Obit\-RPC} $\ast$client, gchar $\ast$server\-URL, {\bf Obit\-XML} $\ast$arg, {\bf Obit\-RPC\_\-response\_\-handler} callback, gpointer user\_\-data, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Send asynchronous RPC request. \item\end{CompactList}\item 
{\bf Obit\-XML} $\ast$ {\bf Obit\-RPCCall\-Rcv} ({\bf Obit\-RPC} $\ast$client, {\bf Obit\-XMLValue} $\ast$result, {\bf Obit\-Info\-List} $\ast$$\ast$status, {\bf Obit\-Info\-List} $\ast$$\ast$request, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Process asynchronous RPC response. \item\end{CompactList}\item 
void {\bf Obit\-RPCAdd\-Method} ({\bf Obit\-RPC} $\ast$server, gchar $\ast$method\_\-name, xmlrpc\_\-method method, gpointer user\_\-data, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Add method callback to server. \item\end{CompactList}\item 
void {\bf Obit\-RPCServer\-Loop} ({\bf Obit\-RPC} $\ast$server, {\bf olong} port, gchar $\ast$log\_\-file)
\begin{CompactList}\small\item\em Start Server loop. \item\end{CompactList}\item 
void {\bf Obit\-RPCClient\-Async\-Loop} ({\bf olong} timeout)
\begin{CompactList}\small\item\em Run client async event loop. \item\end{CompactList}\item 
void {\bf Obit\-RPCClass\-Init} (void)
\begin{CompactList}\small\item\em Public: Class initializer. \item\end{CompactList}\item 
void {\bf Obit\-RPCClass\-Shutdown} (void)
\begin{CompactList}\small\item\em Public: Class shutdown. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
{\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} class function definitions. 

This class is derived from the {\bf Obit}{\rm (p.\,\pageref{structObit})} base class.

\subsection{Function Documentation}
\index{ObitRPC.c@{Obit\-RPC.c}!newObitRPC@{newObitRPC}}
\index{newObitRPC@{newObitRPC}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-RPC}$\ast$ new\-Obit\-RPC (gchar $\ast$ {\em name})}\label{ObitRPC_8c_a7}


Public: Default Constructor. 

Initializes class if needed on first call. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]An optional name for the object. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the new object. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCAddMethod@{ObitRPCAddMethod}}
\index{ObitRPCAddMethod@{ObitRPCAddMethod}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCAdd\-Method ({\bf Obit\-RPC} $\ast$ {\em server}, gchar $\ast$ {\em method\_\-name}, xmlrpc\_\-method {\em method}, gpointer {\em user\_\-data}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a14}


Add method callback to server. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em server}]Server {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} \item[{\em method\_\-name}]name of the method \item[{\em method}]function pointer to xmlrpc\_\-method callback \item[{\em user\_\-data}]Additional data to be passed to method, may be NULL \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCCall@{ObitRPCCall}}
\index{ObitRPCCall@{ObitRPCCall}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-XML}$\ast$ Obit\-RPCCall ({\bf Obit\-RPC} $\ast$ {\em client}, gchar $\ast$ {\em server\-URL}, {\bf Obit\-XML} $\ast$ {\em arg}, {\bf Obit\-Info\-List} $\ast$$\ast$ {\em status}, {\bf Obit\-Info\-List} $\ast$$\ast$ {\em request}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a11}


Public: Send synchronous RPC request. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em client}]Client {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} \item[{\em server\-URL}]URL of service, e.g. \char`\"{}http://localhost:8765/RPC2\char`\"{} \item[{\em arg}]Argument of call (includes method name ) \item[{\em status}][out] if non NULL, Status in form of Info list, entries \char`\"{}code\char`\"{}, \char`\"{}reason\char`\"{} Should be Unrefed when done \item[{\em request}][out] if non NULL, Any in form of Info list, entries \char`\"{}code\char`\"{}, and case dependent parameters. Returns NULL if no request Should be Unrefed when done \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]XML object returned, NULL on communications failure, even if this is defined the function may have failed. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCCallRcv@{ObitRPCCallRcv}}
\index{ObitRPCCallRcv@{ObitRPCCallRcv}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-XML}$\ast$ Obit\-RPCCall\-Rcv ({\bf Obit\-RPC} $\ast$ {\em client}, {\bf Obit\-XMLValue} $\ast$ {\em result}, {\bf Obit\-Info\-List} $\ast$$\ast$ {\em status}, {\bf Obit\-Info\-List} $\ast$$\ast$ {\em request}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a13}


Public: Process asynchronous RPC response. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em client}]Client {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} \item[{\em result}]Response from callback as gpointer \item[{\em status}][out] if non NULL, Status in form of Info list, entries \char`\"{}code\char`\"{}, \char`\"{}reason\char`\"{} Should be Unrefed when done \item[{\em request}][out] if non NULL, Any in form of Info list, entries \char`\"{}code\char`\"{}, and case dependent parameters. Returns NULL if no request Should be Unrefed when done \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]XML object returned, NULL on communications failure, even if this is defined the function may have failed. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCCallSnd@{ObitRPCCallSnd}}
\index{ObitRPCCallSnd@{ObitRPCCallSnd}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCCall\-Snd ({\bf Obit\-RPC} $\ast$ {\em client}, gchar $\ast$ {\em server\-URL}, {\bf Obit\-XML} $\ast$ {\em arg}, {\bf Obit\-RPC\_\-response\_\-handler} {\em callback}, gpointer {\em user\_\-data}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a12}


Public: Send asynchronous RPC request. 

Request is aynchronously sent; the reply will be to callback \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em client}]Client {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} \item[{\em server\-URL}]URL of service, e.g. \char`\"{}http://localhost:8765/RPC2\char`\"{} \item[{\em arg}]Argument of call (includes method name ) \item[{\em callback}]Callback function typedef void ($\ast$xmlrpc\_\-response\_\-handler) (const char $\ast$server\_\-url, const char $\ast$method\_\-name, xmlrpc\_\-value $\ast$param\_\-array, void $\ast$user\_\-data, xmlrpc\_\-env $\ast$fault, xmlrpc\_\-value $\ast$result); \item[{\em user\_\-data}]Pointer to be passed to Callback with result \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]XML object returned, NULL on communications failure, even if this is defined the function may have failed. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCClassInit@{ObitRPCClassInit}}
\index{ObitRPCClassInit@{ObitRPCClassInit}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCClass\-Init (void)}\label{ObitRPC_8c_a17}


Public: Class initializer. 

\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCClassShutdown@{ObitRPCClassShutdown}}
\index{ObitRPCClassShutdown@{ObitRPCClassShutdown}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCClass\-Shutdown (void)}\label{ObitRPC_8c_a18}


Public: Class shutdown. 

\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCClear@{ObitRPCClear}}
\index{ObitRPCClear@{ObitRPCClear}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCClear (gpointer {\em inn})}\label{ObitRPC_8c_a4}


Private: Deallocate members. 

Does (recursive) deallocation of parent class members. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em inn}]Pointer to the object to deallocate. Actually it should be an Obit\-RPC$\ast$ cast to an Obit$\ast$. \end{description}
\end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCClientAsyncLoop@{ObitRPCClientAsyncLoop}}
\index{ObitRPCClientAsyncLoop@{ObitRPCClientAsyncLoop}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCClient\-Async\-Loop ({\bf olong} {\em timeout})}\label{ObitRPC_8c_a16}


Run client async event loop. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em timeout}]timeout in microseconds, $<$= -$>$ forever \end{description}
\end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCCreateClient@{ObitRPCCreateClient}}
\index{ObitRPCCreateClient@{ObitRPCCreateClient}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-RPC}$\ast$ Obit\-RPCCreate\-Client (gchar $\ast$ {\em name}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a9}


Public: Create/initialize client {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} structures. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]An optional name for the object. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the new object. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCCreateServer@{ObitRPCCreateServer}}
\index{ObitRPCCreateServer@{ObitRPCCreateServer}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-RPC}$\ast$ Obit\-RPCCreate\-Server (gchar $\ast$ {\em name}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitRPC_8c_a10}


Public: Create/initialize server {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} structures. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em name}]An optional name for the object. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} Error message \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the new object. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCGetClass@{ObitRPCGetClass}}
\index{ObitRPCGetClass@{ObitRPCGetClass}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gconstpointer Obit\-RPCGet\-Class (void)}\label{ObitRPC_8c_a8}


Public: Class\-Info pointer. 

\begin{Desc}
\item[Returns:]pointer to the class structure. \end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCInit@{ObitRPCInit}}
\index{ObitRPCInit@{ObitRPCInit}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCInit (gpointer {\em inn})}\label{ObitRPC_8c_a3}


Private: Initialize newly instantiated object. 

Parent classes portions are (recursively) initialized first \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em inn}]Pointer to the object to initialize. \end{description}
\end{Desc}
\index{ObitRPC.c@{Obit\-RPC.c}!ObitRPCServerLoop@{ObitRPCServerLoop}}
\index{ObitRPCServerLoop@{ObitRPCServerLoop}!ObitRPC.c@{Obit\-RPC.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-RPCServer\-Loop ({\bf Obit\-RPC} $\ast$ {\em server}, {\bf olong} {\em port}, gchar $\ast$ {\em log\_\-file})}\label{ObitRPC_8c_a15}


Start Server loop. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em server}]Server {\bf Obit\-RPC}{\rm (p.\,\pageref{structObitRPC})} \item[{\em port}]Port number to listen to \item[{\em logging}]file, NULL=$>$/tmp/xmlrpc\_\-log \end{description}
\end{Desc}
