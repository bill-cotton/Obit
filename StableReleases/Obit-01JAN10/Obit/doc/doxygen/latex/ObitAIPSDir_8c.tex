\section{Obit\-AIPSDir.c File Reference}
\label{ObitAIPSDir_8c}\index{ObitAIPSDir.c@{ObitAIPSDir.c}}
{\bf Obit\-AIPSDir}{\rm (p.\,\pageref{structObitAIPSDir})} class function definitions. 

{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$time.h$>$}\par
{\tt \#include $<$math.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include \char`\"{}Obit\-File.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-AIPSDir.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-AIPSCat.h\char`\"{}}\par
\subsection*{Classes}
\begin{CompactItemize}
\item 
struct {\bf Obit\-AIPSDir}
\begin{CompactList}\small\item\em Obit\-AIPSDir Class Structure. \item\end{CompactList}\item 
struct {\bf Obit\-AIPSDir\-Cat\-Head}
\begin{CompactList}\small\item\em AIPS Catalog directory structure This is at the beginning of a catalog. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
gboolean {\bf Obit\-AIPSDir\-Is\-A} ({\bf Obit\-AIPSDir} $\ast$in)
\begin{CompactList}\small\item\em Private: Returns true if input is a Obit\-AIPSDir$\ast$. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Class\-Init} ({\bf olong} number, gchar $\ast$dir[$\,$])
\begin{CompactList}\small\item\em Private: Class initializer. \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Find\-CNO} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], {\bf olong} seq, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Find AIPS Catalog for a given AIPS name ... \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Alloc} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], {\bf olong} seq, gboolean $\ast$exist, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Allocate AIPS directory slot an fill it in. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Remove\-Entry} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Remove Catalog directory entry. \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Number} ({\bf olong} disk, {\bf olong} user, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Determine maximum catalog slot number occupied. \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Hi\-Seq} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], gboolean exist, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Determine maximum sequence number used. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Rename} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, gchar $\ast$new\-Name, gchar new\-Class[7], {\bf olong} new\-Seq, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Rename directory entry. \item\end{CompactList}\item 
{\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$ {\bf Obit\-AIPSDir\-Get\-Entry} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Get Catalog directory entry. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Get\-Access} ({\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$entry, gchar $\ast$time\-Date)
\begin{CompactList}\small\item\em Public: Get last access. \item\end{CompactList}\item 
Obit\-AIPSDir\-Status\-Error {\bf Obit\-AIPSDir\-Status} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, Obit\-AIPSDir\-Status\-Code code, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Change status of Catalog directory entry. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
{\bf Obit\-AIPSDir}{\rm (p.\,\pageref{structObitAIPSDir})} class function definitions. 



\subsection{Function Documentation}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirAlloc@{ObitAIPSDirAlloc}}
\index{ObitAIPSDirAlloc@{ObitAIPSDirAlloc}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Alloc ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], {\bf olong} {\em seq}, gboolean $\ast$ {\em exist}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a20}


Public: Allocate AIPS directory slot an fill it in. 

If it doesn't exist find the first free slot and allocate it to the new entry. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em Aname}]AIPS name. \item[{\em Aclass}]AIPS class. \item[{\em Atype}]AIPS file type (MA, UV, SC). \item[{\em seq}]AIPS sequence number. If $<$=0 then one is assigned if a matching file exists, the highest sequence number, is used, else seq 1 is allocated. \item[{\em exist}][out] TRUE iff the entry previously existed. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the catalog slot number or -1 if it was not found. \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirClassInit@{ObitAIPSDirClassInit}}
\index{ObitAIPSDirClassInit@{ObitAIPSDirClassInit}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Class\-Init ({\bf olong} {\em number}, gchar $\ast$ {\em dir}[$\,$])}\label{ObitAIPSDir_8c_a18}


Private: Class initializer. 

\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirFindCNO@{ObitAIPSDirFindCNO}}
\index{ObitAIPSDirFindCNO@{ObitAIPSDirFindCNO}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Find\-CNO ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], {\bf olong} {\em seq}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a19}


Public: Find AIPS Catalog for a given AIPS name ... 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number to search. \item[{\em user}]AIPS user number \item[{\em Aname}]AIPS name. \item[{\em Aclass}]AIPS class. \item[{\em Atype}]AIPS file type (\char`\"{}MA\char`\"{}, \char`\"{}UV\char`\"{}, \char`\"{}SC\char`\"{}, \char`\"{}  \char`\"{}=$>$any). \item[{\em seq}]AIPS sequence number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the catalog slot number or -1 if it was not found. \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirGetAccess@{ObitAIPSDirGetAccess}}
\index{ObitAIPSDirGetAccess@{ObitAIPSDirGetAccess}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Get\-Access ({\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$ {\em entry}, gchar $\ast$ {\em time\-Date})}\label{ObitAIPSDir_8c_a26}


Public: Get last access. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em entry}]Structure whose access time is desired \item[{\em time\-Date}]String to accept date/time string Must have at least 21 char allocated. \end{description}
\end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirGetEntry@{ObitAIPSDirGetEntry}}
\index{ObitAIPSDirGetEntry@{ObitAIPSDirGetEntry}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-AIPSDir\-Cat\-Entry}$\ast$ Obit\-AIPSDir\-Get\-Entry ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a25}


Public: Get Catalog directory entry. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]user id number. \item[{\em cno}]catalog slot number \item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to a newly created {\bf Obit\-AIPSDir\-Cat\-Entry}{\rm (p.\,\pageref{structObitAIPSDirCatEntry})}, NULL on failure, this must be freed (g\_\-free). \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirHiSeq@{ObitAIPSDirHiSeq}}
\index{ObitAIPSDirHiSeq@{ObitAIPSDirHiSeq}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Hi\-Seq ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], gboolean {\em exist}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a23}


Public: Determine maximum sequence number used. 

If exist==TRUE and a match is found the highest value is returned. If If exist==FALSE and a match is found , the highest seq+1 is returned If there are no matches, 1 is returned \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number., if 0, check all \item[{\em user}]AIPS user number. \item[{\em Aname}]AIPS name, NULLs assumed equivalent to blank \item[{\em Aclass}]AIPS class. NULLs assumed equivalent to blank \item[{\em Atype}]AIPS file type (MA, UV, SC). \item[{\em exist}]TRUE iff the entry already exists (open for read) \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the desired AIPS sequence number, -1 on error \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirIsA@{ObitAIPSDirIsA}}
\index{ObitAIPSDirIsA@{ObitAIPSDirIsA}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gboolean Obit\-AIPSDir\-Is\-A ({\bf Obit\-AIPSDir} $\ast$ {\em in})}\label{ObitAIPSDir_8c_a13}


Private: Returns true if input is a Obit\-AIPSDir$\ast$. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Pointer to catalog directory structure info. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if the correct class else FALSE. \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirNumber@{ObitAIPSDirNumber}}
\index{ObitAIPSDirNumber@{ObitAIPSDirNumber}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Number ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a22}


Public: Determine maximum catalog slot number occupied. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]highest catalog slot number in directory \end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirRemoveEntry@{ObitAIPSDirRemoveEntry}}
\index{ObitAIPSDirRemoveEntry@{ObitAIPSDirRemoveEntry}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Remove\-Entry ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a21}


Public: Remove Catalog directory entry. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em cno}]Catalog slot number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirRename@{ObitAIPSDirRename}}
\index{ObitAIPSDirRename@{ObitAIPSDirRename}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Rename ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, gchar $\ast$ {\em new\-Name}, gchar {\em new\-Class}[7], {\bf olong} {\em new\-Seq}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a24}


Rename directory entry. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]Disk number \item[{\em user}]AIPS user number. \item[{\em cno}]Slot number to be renamed \item[{\em new\-Name}]New AIPS name (12 characters) \item[{\em new\-Class}]New AIPS Class (6 characters) \item[{\em new\-Seq}]New AIPS sequence \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\index{ObitAIPSDir.c@{Obit\-AIPSDir.c}!ObitAIPSDirStatus@{ObitAIPSDirStatus}}
\index{ObitAIPSDirStatus@{ObitAIPSDirStatus}!ObitAIPSDir.c@{Obit\-AIPSDir.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Obit\-AIPSDir\-Status\-Error Obit\-AIPSDir\-Status ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, Obit\-AIPSDir\-Status\-Code {\em code}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8c_a27}


Public: Change status of Catalog directory entry. 

Only one program/thread can mark an entry write and if the entry is marked write no reads can be added. Errors are indicated in err and as the return code. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]user id number. \item[{\em cno}]catalog slot number \item[{\em code}]a status change code as an \#Obit\-AIPSDir\-Status\-Code defined in {\bf Obit\-AIPSDir.h}{\rm (p.\,\pageref{ObitAIPSDir_8h})}. \begin{itemize}
\item OBIT\_\-AIPS\_\-Dir\_\-Add\-Write =$>$ Add Write Status \item OBIT\_\-AIPS\_\-Dir\_\-Clear\-Write =$>$ Clear Write Status \item OBIT\_\-AIPS\_\-Dir\_\-Inc\-Read =$>$ Increment Read Status \item OBIT\_\-AIPS\_\-Dir\_\-Dec\-Read =$>$ Decrement Read Status \end{itemize}
\item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]a completion code as an \#Obit\-AIPSDir\-Status\-Error. OBIT\_\-AIPS\_\-Dir\_\-Status\-OK on success. \end{Desc}
