\section{Obit\-AIPSDir.h File Reference}
\label{ObitAIPSDir_8h}\index{ObitAIPSDir.h@{ObitAIPSDir.h}}
{\bf Obit\-AIPSDir}{\rm (p.\,\pageref{structObitAIPSDir})} class definition. 

{\tt \#include $<$glib.h$>$}\par
{\tt \#include \char`\"{}Obit\-Err.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Thread.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-AIPS.h\char`\"{}}\par
\subsection*{Classes}
\begin{CompactItemize}
\item 
struct {\bf Obit\-AIPSDir\-Cat\-Entry}
\begin{CompactList}\small\item\em AIPS Catalog (directory) entry structure A short description of the name and access info. \item\end{CompactList}\end{CompactItemize}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum {\bf \_\-Obit\-AIPSDir\-Status\-Code} \{ \par
{\bf OBIT\_\-AIPS\_\-Dir\_\-Add\-Write}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Clear\-Write}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Inc\-Read}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Dec\-Read}, 
\par
{\bf OBIT\_\-AIPS\_\-Dir\_\-Clear\-All}
 \}
\begin{CompactList}\small\item\em enum for Catalog status change codes. \item\end{CompactList}\item 
enum {\bf \_\-Obit\-AIPSDir\-Status\-Error} \{ \par
{\bf OBIT\_\-AIPS\_\-Dir\_\-Status\-OK}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Status\-Spec\-Err}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Status\-IOErr}, 
{\bf OBIT\_\-AIPS\_\-Dir\_\-Status\-Read}, 
\par
{\bf OBIT\_\-AIPS\_\-Dir\_\-Status\-Write}
 \}
\begin{CompactList}\small\item\em enum for Catalog status change errors. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
{\bf olong} {\bf Obit\-AIPSDir\-Find\-CNO} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], {\bf olong} seq, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Find AIPS Catalog for a given AIPS name ... \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Alloc} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], {\bf olong} seq, gboolean $\ast$exist, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Allocate AIPS directory slot an fill it in. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Remove\-Entry} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Remove Catalog directory entry. \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Number} ({\bf olong} disk, {\bf olong} user, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Determine maximum catalog slot number occupied. \item\end{CompactList}\item 
{\bf olong} {\bf Obit\-AIPSDir\-Hi\-Seq} ({\bf olong} disk, {\bf olong} user, gchar Aname[13], gchar Aclass[7], gchar Atype[3], gboolean exist, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Determine maximum sequence number used. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Rename} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, gchar $\ast$new\-Name, gchar $\ast$new\-Class, {\bf olong} new\-Seq, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Rename entry. \item\end{CompactList}\item 
{\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$ {\bf Obit\-AIPSDir\-Get\-Entry} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Get Catalog directory entry. \item\end{CompactList}\item 
void {\bf Obit\-AIPSDir\-Get\-Access} ({\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$entry, gchar $\ast$time\-Date)
\begin{CompactList}\small\item\em Public: Get last access. \item\end{CompactList}\item 
Obit\-AIPSDir\-Status\-Error {\bf Obit\-AIPSDir\-Status} ({\bf olong} disk, {\bf olong} user, {\bf olong} cno, Obit\-AIPSDir\-Status\-Code code, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Change status of Catalog directory entry. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
{\bf Obit\-AIPSDir}{\rm (p.\,\pageref{structObitAIPSDir})} class definition. 

This is a Utility class to handle the interface with the AIPS catalog directory system. This class is non-derivable and has no public instances.

\subsection{Enumeration Type Documentation}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!_ObitAIPSDirStatusCode@{\_\-ObitAIPSDirStatusCode}}
\index{_ObitAIPSDirStatusCode@{\_\-ObitAIPSDirStatusCode}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf \_\-Obit\-AIPSDir\-Status\-Code}}\label{ObitAIPSDir_8h_a19}


enum for Catalog status change codes. 

\begin{Desc}
\item[Enumeration values: ]\par
\begin{description}
\index{OBIT_AIPS_Dir_AddWrite@{OBIT\_\-AIPS\_\-Dir\_\-AddWrite}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_AddWrite@{OBIT\_\-AIPS\_\-Dir\_\-AddWrite}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Add\-Write\label{ObitAIPSDir_8h_a19a0}
}]Add Write Status. \index{OBIT_AIPS_Dir_ClearWrite@{OBIT\_\-AIPS\_\-Dir\_\-ClearWrite}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_ClearWrite@{OBIT\_\-AIPS\_\-Dir\_\-ClearWrite}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Clear\-Write\label{ObitAIPSDir_8h_a19a1}
}]Clear Write Status. \index{OBIT_AIPS_Dir_IncRead@{OBIT\_\-AIPS\_\-Dir\_\-IncRead}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_IncRead@{OBIT\_\-AIPS\_\-Dir\_\-IncRead}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Inc\-Read\label{ObitAIPSDir_8h_a19a2}
}]Increment Read Status. \index{OBIT_AIPS_Dir_DecRead@{OBIT\_\-AIPS\_\-Dir\_\-DecRead}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_DecRead@{OBIT\_\-AIPS\_\-Dir\_\-DecRead}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Dec\-Read\label{ObitAIPSDir_8h_a19a3}
}]Decrement Read Status. \index{OBIT_AIPS_Dir_ClearAll@{OBIT\_\-AIPS\_\-Dir\_\-ClearAll}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_ClearAll@{OBIT\_\-AIPS\_\-Dir\_\-ClearAll}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Clear\-All\label{ObitAIPSDir_8h_a19a4}
}]Clear All Status. \end{description}
\end{Desc}

\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!_ObitAIPSDirStatusError@{\_\-ObitAIPSDirStatusError}}
\index{_ObitAIPSDirStatusError@{\_\-ObitAIPSDirStatusError}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}enum {\bf \_\-Obit\-AIPSDir\-Status\-Error}}\label{ObitAIPSDir_8h_a20}


enum for Catalog status change errors. 

\begin{Desc}
\item[Enumeration values: ]\par
\begin{description}
\index{OBIT_AIPS_Dir_StatusOK@{OBIT\_\-AIPS\_\-Dir\_\-StatusOK}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_StatusOK@{OBIT\_\-AIPS\_\-Dir\_\-StatusOK}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Status\-OK\label{ObitAIPSDir_8h_a20a5}
}]Operation OK. \index{OBIT_AIPS_Dir_StatusSpecErr@{OBIT\_\-AIPS\_\-Dir\_\-StatusSpecErr}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_StatusSpecErr@{OBIT\_\-AIPS\_\-Dir\_\-StatusSpecErr}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Status\-Spec\-Err\label{ObitAIPSDir_8h_a20a6}
}]Input Specification Error. \index{OBIT_AIPS_Dir_StatusIOErr@{OBIT\_\-AIPS\_\-Dir\_\-StatusIOErr}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_StatusIOErr@{OBIT\_\-AIPS\_\-Dir\_\-StatusIOErr}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Status\-IOErr\label{ObitAIPSDir_8h_a20a7}
}]I/O Error. \index{OBIT_AIPS_Dir_StatusRead@{OBIT\_\-AIPS\_\-Dir\_\-StatusRead}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_StatusRead@{OBIT\_\-AIPS\_\-Dir\_\-StatusRead}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Status\-Read\label{ObitAIPSDir_8h_a20a8}
}]Cannot add write due to read status. \index{OBIT_AIPS_Dir_StatusWrite@{OBIT\_\-AIPS\_\-Dir\_\-StatusWrite}!ObitAIPSDir.h@{ObitAIPSDir.h}}\index{ObitAIPSDir.h@{ObitAIPSDir.h}!OBIT_AIPS_Dir_StatusWrite@{OBIT\_\-AIPS\_\-Dir\_\-StatusWrite}}\item[{\em 
OBIT\_\-AIPS\_\-Dir\_\-Status\-Write\label{ObitAIPSDir_8h_a20a9}
}]Cannot add read or write due to write status. \end{description}
\end{Desc}



\subsection{Function Documentation}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirAlloc@{ObitAIPSDirAlloc}}
\index{ObitAIPSDirAlloc@{ObitAIPSDirAlloc}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Alloc ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], {\bf olong} {\em seq}, gboolean $\ast$ {\em exist}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a11}


Public: Allocate AIPS directory slot an fill it in. 

If it doesn't exist find the first free slot and allocate it to the new entry. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em Aname}]AIPS name. \item[{\em Aclass}]AIPS class. \item[{\em Atype}]AIPS file type (MA, UV, SC). \item[{\em seq}]AIPS sequence number. If $<$=0 then one is assigned if a matching file exists, the highest sequence number, is used, else seq 1 is allocated. \item[{\em exist}][out] TRUE iff the entry previously existed. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the catalog slot number or -1 if it was not found. \end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirFindCNO@{ObitAIPSDirFindCNO}}
\index{ObitAIPSDirFindCNO@{ObitAIPSDirFindCNO}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Find\-CNO ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], {\bf olong} {\em seq}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a10}


Public: Find AIPS Catalog for a given AIPS name ... 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number to search. \item[{\em user}]AIPS user number \item[{\em Aname}]AIPS name. \item[{\em Aclass}]AIPS class. \item[{\em Atype}]AIPS file type (\char`\"{}MA\char`\"{}, \char`\"{}UV\char`\"{}, \char`\"{}SC\char`\"{}, \char`\"{}  \char`\"{}=$>$any). \item[{\em seq}]AIPS sequence number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the catalog slot number or -1 if it was not found. \end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirGetAccess@{ObitAIPSDirGetAccess}}
\index{ObitAIPSDirGetAccess@{ObitAIPSDirGetAccess}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Get\-Access ({\bf Obit\-AIPSDir\-Cat\-Entry} $\ast$ {\em entry}, gchar $\ast$ {\em time\-Date})}\label{ObitAIPSDir_8h_a17}


Public: Get last access. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em entry}]Structure whose access time is desired \item[{\em time\-Date}]String to accept date/time string Must have at least 21 char allocated. \end{description}
\end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirGetEntry@{ObitAIPSDirGetEntry}}
\index{ObitAIPSDirGetEntry@{ObitAIPSDirGetEntry}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-AIPSDir\-Cat\-Entry}$\ast$ Obit\-AIPSDir\-Get\-Entry ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a16}


Public: Get Catalog directory entry. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]user id number. \item[{\em cno}]catalog slot number \item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to a newly created {\bf Obit\-AIPSDir\-Cat\-Entry}{\rm (p.\,\pageref{structObitAIPSDirCatEntry})}, NULL on failure, this must be freed (g\_\-free). \end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirHiSeq@{ObitAIPSDirHiSeq}}
\index{ObitAIPSDirHiSeq@{ObitAIPSDirHiSeq}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Hi\-Seq ({\bf olong} {\em disk}, {\bf olong} {\em user}, gchar {\em Aname}[13], gchar {\em Aclass}[7], gchar {\em Atype}[3], gboolean {\em exist}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a14}


Public: Determine maximum sequence number used. 

If exist==TRUE and a match is found the highest value is returned. If If exist==FALSE and a match is found , the highest seq+1 is returned If there are no matches, 1 is returned \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number., if 0, check all \item[{\em user}]AIPS user number. \item[{\em Aname}]AIPS name, NULLs assumed equivalent to blank \item[{\em Aclass}]AIPS class. NULLs assumed equivalent to blank \item[{\em Atype}]AIPS file type (MA, UV, SC). \item[{\em exist}]TRUE iff the entry already exists (open for read) \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the desired AIPS sequence number, -1 on error \end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirNumber@{ObitAIPSDirNumber}}
\index{ObitAIPSDirNumber@{ObitAIPSDirNumber}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf olong} Obit\-AIPSDir\-Number ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a13}


Public: Determine maximum catalog slot number occupied. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]highest catalog slot number in directory \end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirRemoveEntry@{ObitAIPSDirRemoveEntry}}
\index{ObitAIPSDirRemoveEntry@{ObitAIPSDirRemoveEntry}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Remove\-Entry ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a12}


Public: Remove Catalog directory entry. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]AIPS user number. \item[{\em cno}]Catalog slot number. \item[{\em err}]{\bf Obit}{\rm (p.\,\pageref{structObit})} error stack. \end{description}
\end{Desc}
\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirRename@{ObitAIPSDirRename}}
\index{ObitAIPSDirRename@{ObitAIPSDirRename}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-AIPSDir\-Rename ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, gchar $\ast$ {\em new\-Name}, gchar $\ast$ {\em new\-Class}, {\bf olong} {\em new\-Seq}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a15}


Public: Rename entry. 

\index{ObitAIPSDir.h@{Obit\-AIPSDir.h}!ObitAIPSDirStatus@{ObitAIPSDirStatus}}
\index{ObitAIPSDirStatus@{ObitAIPSDirStatus}!ObitAIPSDir.h@{Obit\-AIPSDir.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}Obit\-AIPSDir\-Status\-Error Obit\-AIPSDir\-Status ({\bf olong} {\em disk}, {\bf olong} {\em user}, {\bf olong} {\em cno}, Obit\-AIPSDir\-Status\-Code {\em code}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitAIPSDir_8h_a18}


Public: Change status of Catalog directory entry. 

Only one program/thread can mark an entry write and if the entry is marked write no reads can be added. Errors are indicated in err and as the return code. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em disk}]disk number. \item[{\em user}]user id number. \item[{\em cno}]catalog slot number \item[{\em code}]a status change code as an \#Obit\-AIPSDir\-Status\-Code defined in {\bf Obit\-AIPSDir.h}{\rm (p.\,\pageref{ObitAIPSDir_8h})}. \begin{itemize}
\item OBIT\_\-AIPS\_\-Dir\_\-Add\-Write =$>$ Add Write Status \item OBIT\_\-AIPS\_\-Dir\_\-Clear\-Write =$>$ Clear Write Status \item OBIT\_\-AIPS\_\-Dir\_\-Inc\-Read =$>$ Increment Read Status \item OBIT\_\-AIPS\_\-Dir\_\-Dec\-Read =$>$ Decrement Read Status \end{itemize}
\item[{\em err}]{\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} error stack. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]a completion code as an \#Obit\-AIPSDir\-Status\-Error. OBIT\_\-AIPS\_\-Dir\_\-Status\-OK on success. \end{Desc}
