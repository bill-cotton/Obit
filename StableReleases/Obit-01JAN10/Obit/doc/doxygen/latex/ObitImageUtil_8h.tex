\section{Obit\-Image\-Util.h File Reference}
\label{ObitImageUtil_8h}\index{ObitImageUtil.h@{ObitImageUtil.h}}
Obit\-Image\-Util module definition. 

{\tt \#include \char`\"{}Obit.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Err.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Info\-List.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UV.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Image.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-Image\-Desc.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVDesc.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-FArray.h\char`\"{}}\par
{\tt \#include \char`\"{}Obit\-UVGrid.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf Obit\-Image\-Util\-Set}(in, n\-Vis\-PIO, n\-Ch\-Avg, rotate, nfield, nx, nx\-Beam, ny, ny\-Beam, x\-Cells, y\-Cells, x\-Shift, y\-Shift, err)
\begin{CompactList}\small\item\em Convenience Macro to set imaging parameters on an {\bf Obit\-UV}{\rm (p.\,\pageref{structObitUV})}. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Util\-Create\-Image} ({\bf Obit\-UV} $\ast$in\-UV, {\bf olong} field\-No, gboolean do\-Beam, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create an {\bf Obit\-Image}{\rm (p.\,\pageref{structObitImage})} from uv data. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Make\-Image} ({\bf Obit\-UV} $\ast$in\-UV, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} channel, gboolean do\-Beam, gboolean do\-Weight, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Fill an image with an image made from from uv data. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Make\-Image\-Par} ({\bf Obit\-UV} $\ast$in\-UV, {\bf olong} n\-Par, {\bf Obit\-Image} $\ast$$\ast$out\-Image, gboolean do\-Beam, gboolean do\-Weight, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Parallel fill images with those image made from from uv data. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Make\-Image\-File\-Info} ({\bf Obit\-Info\-List} $\ast$in\-List, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Make an image from from uv data, info in {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-UV2Image\-Desc} ({\bf Obit\-UVDesc} $\ast$UVDesc, {\bf Obit\-Image\-Desc} $\ast$image\-Desc, {\bf olong} nchavg)
\begin{CompactList}\small\item\em Public: Convert an {\bf Obit\-UVDesc}{\rm (p.\,\pageref{structObitUVDesc})} to an {\bf Obit\-Image\-Desc}{\rm (p.\,\pageref{structObitImageDesc})}. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Interpolate\-Image} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} $\ast$in\-Plane, {\bf olong} $\ast$out\-Plane, {\bf olong} hwidth, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Interpolate pixels in one image to another. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Interpolate\-Image\-Zern} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} $\ast$in\-Plane, {\bf olong} $\ast$out\-Plane, {\bf olong} hwidth, {\bf olong} n\-Zern, {\bf ofloat} $\ast$ZCoef, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Interpolate pixels in one image to another with Zernike corrections. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Interpolate\-Weight} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf Obit\-Image} $\ast$out\-Weight, gboolean mem\-Only, {\bf olong} radius, {\bf olong} $\ast$in\-Plane, {\bf olong} $\ast$out\-Plane, {\bf olong} hwidth, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Interpolate pixels in one image to another giving output weighting. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-PBCorr} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$pnt\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} $\ast$in\-Plane, {\bf olong} $\ast$out\-Plane, {\bf ofloat} ant\-Size, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Correct (divide) an image by the primary beam pattern of another. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-PBApply} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$pnt\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} $\ast$in\-Plane, {\bf olong} $\ast$out\-Plane, {\bf ofloat} ant\-Size, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Multiply an image by the primary beam pattern of another. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-PBImage} ({\bf Obit\-Image} $\ast$pnt\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf olong} $\ast$out\-Plane, {\bf ofloat} ant\-Size, {\bf ofloat} min\-Gain, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Fill image with the primary beam pattern. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Imag\-Parm} ({\bf ofloat} Max\-BL, {\bf ofloat} Max\-W, {\bf ofloat} $\ast$Cells, {\bf ofloat} $\ast$Radius)
\begin{CompactList}\small\item\em Public: determine imaging parameters from UVW Extrema. \item\end{CompactList}\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Util\-Array2Image} (gchar $\ast$file\-Name, {\bf olong} disk, {\bf Obit\-FArray} $\ast$in\-Array, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Create a FITS image from an {\bf Obit\-FArray}{\rm (p.\,\pageref{structObitFArray})}. \item\end{CompactList}\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Util\-Quan\-FITS} ({\bf Obit\-Image} $\ast$in\-Image, gchar $\ast$file\-Name, {\bf olong} disk, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Quantize an {\bf Obit\-Image}{\rm (p.\,\pageref{structObitImage})} and write to a FITS image. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Make\-Cube} ({\bf Obit\-Image\-Desc} $\ast$in\-Desc, {\bf Obit\-UVDesc} $\ast$uv\-Desc, {\bf Obit\-Image\-Desc} $\ast$out\-Desc, gchar $\ast$Stokes, {\bf olong} bchan, {\bf olong} echan, {\bf olong} incr, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Define an Image freq cube descriptor from a single plane and uv Descriptors. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Insert\-Plane} ({\bf Obit\-Image} $\ast$in, {\bf Obit\-Image} $\ast$out, {\bf olong} $\ast$plane, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Insert a plane from an image into a cube. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Insert\-Cube} ({\bf Obit\-Image} $\ast$in, {\bf Obit\-Image} $\ast$out, {\bf olong} $\ast$plane, {\bf olong} ax\-Exp, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Insert multiple planes from image in starting at plane in out. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Vel} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Flux weighted velocity image from Cube. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-Sel\-Copy} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Copy with selection by pixel increment. \item\end{CompactList}\item 
void {\bf Obit\-Image\-Util\-UVFilter} ({\bf Obit\-Image} $\ast$in\-Image, {\bf Obit\-Image} $\ast$out\-Image, {\bf ofloat} radius, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Filter out of band noise. \item\end{CompactList}\item 
{\bf Obit\-Image} $\ast$ {\bf Obit\-Image\-Util\-FArray2FITS} ({\bf Obit\-FArray} $\ast$array, gchar $\ast$FITSFile, {\bf olong} FITSdisk, {\bf Obit\-Image\-Desc} $\ast$desc, {\bf Obit\-Err} $\ast$err)
\begin{CompactList}\small\item\em Public: Write {\bf Obit\-FArray}{\rm (p.\,\pageref{structObitFArray})} as a FITS image. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Obit\-Image\-Util module definition. 

This utility module contains functions for manipulating images and imaging uv data.

\subsection{Define Documentation}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilSet@{ObitImageUtilSet}}
\index{ObitImageUtilSet@{ObitImageUtilSet}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define Obit\-Image\-Util\-Set(in, n\-Vis\-PIO, n\-Ch\-Avg, rotate, nfield, nx, nx\-Beam, ny, ny\-Beam, x\-Cells, y\-Cells, x\-Shift, y\-Shift, err)}\label{ObitImageUtil_8h_a0}


{\bf Value:}

\footnotesize\begin{verbatim}G_STMT_START{ \
       in->info->dim[0]=1; in->info->dim[1]=1; in->info->dim[2]=1;  \
       in->info->dim[3]=1; in->info->dim[4]=1;                      \
       in->info->work[0]= nChAvg;  in->info->work[1]= nVisPIO;      \
       in->info->fwork[0]= rotate;                                  \
       ObitInfoListPut (in->info, "nVisPIO", OBIT_long,              \
                  in->info->dim, (gpointer)&in->info->work[1], err);\
       ObitInfoListPut (in->info, "nChAvg", OBIT_long,               \
                  in->info->dim, (gpointer)&in->info->work[0], err);\
       ObitInfoListPut (in->info, "rotate", OBIT_float,             \
                  in->info->dim, (gpointer)&in->info->fwork[0],err);\
       in->info->dim[0] = nfield;                                   \
       ObitInfoListPut (in->info, "nx", OBIT_long, in->info->dim,    \
                 (gpointer)&nx, err);                               \
       ObitInfoListPut (in->info, "nxBeam", OBIT_long, in->info->dim,\
                 (gpointer)&nxBeam, err);                           \
       ObitInfoListPut (in->info, "ny", OBIT_long, in->info->dim,    \
                 (gpointer)&ny, err);                               \
       ObitInfoListPut (in->info, "nyBeam", OBIT_long, in->info->dim,\
                 (gpointer)&nyBeam, err);                           \
       ObitInfoListPut (in->info, "xCells",OBIT_float,in->info->dim,\
                 (gpointer)xCells, err);                            \
       ObitInfoListPut (in->info, "yCells",OBIT_float,in->info->dim,\
                 (gpointer)yCells, err);                            \
       ObitInfoListPut (in->info, "xShift",OBIT_float,in->info->dim,\
                 (gpointer)xShift, err);                            \
       ObitInfoListPut (in->info, "yShift",OBIT_float,in->info->dim,\
                 (gpointer)yShift, err);                            \
     }G_STMT_END
\end{verbatim}\normalsize 
Convenience Macro to set imaging parameters on an {\bf Obit\-UV}{\rm (p.\,\pageref{structObitUV})}. 

Sets values on {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})} on input object. May fail for literal constants. \begin{itemize}
\item in = {\bf Obit\-UV}{\rm (p.\,\pageref{structObitUV})} to specify parameters for. \item n\-Vis\-PIO Number of visibilities per read/write \item n\-Ch\-Avg Number of spectral channels to average per image plane. (OBIT\_\-int) \item rotate Image rotation angle (same for all).(OBIT\_\-float) 0=$>$ image all. Ignored if IF axis larger than 1. \item NField Number of fields, the following all are arrays of this dimension. \item nx Number of \char`\"{}X\char`\"{} (RA) pixels in image. (OBIT\_\-int) \item nx\-Beam Number of \char`\"{}X\char`\"{} (RA) pixels in beam. (OBIT\_\-int) \item ny Number of \char`\"{}Y\char`\"{} (Dec) pixels in image.(OBIT\_\-int) \item ny\-Beam Number of \char`\"{}Y\char`\"{} (Dec) pixels in beam. (OBIT\_\-int) \item x\-Cells Cell spacing in X in asec. (OBIT\_\-float) \item y\-Cells Cell spacing in Y in asec. (OBIT\_\-float) \item x\-Shift Shift in X (after rotation) in deg. (OBIT\_\-float) \item y\-Shift Shift in Y (after rotation) in deg. (OBIT\_\-float) \item err = {\bf Obit\-Err}{\rm (p.\,\pageref{structObitErr})} to receive error messages. \end{itemize}


\subsection{Function Documentation}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilArray2Image@{ObitImageUtilArray2Image}}
\index{ObitImageUtilArray2Image@{ObitImageUtilArray2Image}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Util\-Array2Image (gchar $\ast$ {\em file\-Name}, {\bf olong} {\em disk}, {\bf Obit\-FArray} $\ast$ {\em in\-Array}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a13}


Public: Create a FITS image from an {\bf Obit\-FArray}{\rm (p.\,\pageref{structObitFArray})}. 

Currently only does two to four dimensions. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file\-Name}]output FITS image file name \item[{\em disk}]output FITS disk number \item[{\em in\-Array}]Data array to be written \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to the new object. \end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilCreateImage@{ObitImageUtilCreateImage}}
\index{ObitImageUtilCreateImage@{ObitImageUtilCreateImage}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Util\-Create\-Image ({\bf Obit\-UV} $\ast$ {\em in\-UV}, {\bf olong} {\em field\-No}, gboolean {\em do\-Beam}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a1}


Public: Create an {\bf Obit\-Image}{\rm (p.\,\pageref{structObitImage})} from uv data. 

Imaging parameters are on the in\-UV info member as arrays for a number of fields. \begin{itemize}
\item \char`\"{}n\-Ch\-Avg\char`\"{} OBIT\_\-long (1,1,1) number of channels to average. This is for spectral line observations and is ignored if the IF axis on the uv data has more than one IF. Default is continuum = average all freq/IFs. 0=$>$ all. \item \char`\"{}rotate\char`\"{} OBIT\_\-float (?,1,1) Desired rotation on sky (from N thru E) in deg. [0] \item \char`\"{}nx\char`\"{} OBIT\_\-long (?,1,1) Dimension of image in RA [no default]. This and the following are arrays with one entry per field. \item \char`\"{}nx\-Beam\char`\"{} OBIT\_\-long (?,1,1) Dimension of beam in RA, [def. nx] \item \char`\"{}ny\char`\"{} OBIT\_\-long (?,1,1) Dimension of image in declination[no default] \item \char`\"{}ny\-Beam\char`\"{} OBIT\_\-long (?,1,1) Dimension of beam in declination, [def. ny] \item \char`\"{}x\-Cells\char`\"{} OBIT\_\-float (?,1,1) X (=RA) cell spacing in asec [no default] \item \char`\"{}y\-Cells\char`\"{} OBIT\_\-float (?,1,1) Y (=dec) cell spacing in asec [no default] \item \char`\"{}x\-Shift\char`\"{} OBIT\_\-float (?,1,1) Desired shift in X (=RA) in degrees. [0] \item \char`\"{}y\-Shift\char`\"{} OBIT\_\-float (?,1,1) Desired shift in Y (=dec) in degrees. [0] \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-UV}]Input uv data. \item[{\em field\-No}]Which field (1-rel) in imaging parameter arrays. \item[{\em do\-Beam}]if TRUE also create beam as the my\-Beam member of returned image. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Pointer to the newly created {\bf Obit\-Image}{\rm (p.\,\pageref{structObitImage})}. \end{Desc}
\end{itemize}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilFArray2FITS@{ObitImageUtilFArray2FITS}}
\index{ObitImageUtilFArray2FITS@{ObitImageUtilFArray2FITS}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Util\-FArray2FITS ({\bf Obit\-FArray} $\ast$ {\em array}, gchar $\ast$ {\em FITSFile}, {\bf olong} {\em FITSdisk}, {\bf Obit\-Image\-Desc} $\ast$ {\em desc}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a21}


Public: Write {\bf Obit\-FArray}{\rm (p.\,\pageref{structObitFArray})} as a FITS image. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em array}]Array to write \item[{\em FITSFile}]Name of FITS file \item[{\em FITSdisk}]FITS disk number \item[{\em desc}]If non\-NULL, use to derive the output header \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Obit\-Image$\ast$ of output \end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilImagParm@{ObitImageUtilImagParm}}
\index{ObitImageUtilImagParm@{ObitImageUtilImagParm}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Imag\-Parm ({\bf ofloat} {\em Max\-BL}, {\bf ofloat} {\em Max\-W}, {\bf ofloat} $\ast$ {\em Cells}, {\bf ofloat} $\ast$ {\em Radius})}\label{ObitImageUtil_8h_a12}


Public: determine imaging parameters from UVW Extrema. 

Otherwise, maximum field size from Lecture 2 (A. R. Thompson) in \char`\"{}Synthesis Imaging in Radio Astronomy II\char`\"{}, PASP, vol. 180, 1999, p. 24 is used. A correction is applied for the actual range in W. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em Max\-BL}]maximum baseline length (sqrt(u$\ast$u+v$\ast$v)) \item[{\em Max\-W}]Max abs(w) in data. \item[{\em Cells}]Cell spacing in asec. If zero on input the value is set based on Max\-BL (1/4 min fringe spacing) \item[{\em Radius}]Maximum undistorted Field of view in cells (Cells). If zero on input, the value is set from Max\-W. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilInsertCube@{ObitImageUtilInsertCube}}
\index{ObitImageUtilInsertCube@{ObitImageUtilInsertCube}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Insert\-Cube ({\bf Obit\-Image} $\ast$ {\em in}, {\bf Obit\-Image} $\ast$ {\em out}, {\bf olong} $\ast$ {\em plane}, {\bf olong} {\em ax\-Exp}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a17}


Public: Insert multiple planes from image in starting at plane in out. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Input image cube with planes to copy Any BLC, TRC are honored \item[{\em out}]Output cube to accept planes \item[{\em plane}](1-rel) pixel indices for planes 3-7 in out. \item[{\em ax\-Exp}](1-rel) axis number being expanded (usually 3) \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilInsertPlane@{ObitImageUtilInsertPlane}}
\index{ObitImageUtilInsertPlane@{ObitImageUtilInsertPlane}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Insert\-Plane ({\bf Obit\-Image} $\ast$ {\em in}, {\bf Obit\-Image} $\ast$ {\em out}, {\bf olong} $\ast$ {\em plane}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a16}


Public: Insert a plane from an image into a cube. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in}]Input image with plane to copy \item[{\em out}]Output cube to accept plane \item[{\em plane}](1-rel) pixel indices for planes 3-7 in out. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilInterpolateImage@{ObitImageUtilInterpolateImage}}
\index{ObitImageUtilInterpolateImage@{ObitImageUtilInterpolateImage}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Interpolate\-Image ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} $\ast$ {\em in\-Plane}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf olong} {\em hwidth}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a6}


Public: Interpolate pixels in one image to another. 

There is no interpolation between planes \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to be interpolated. \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em in\-Plane}]desired plane in in\-Image, 1-rel pixel numbers on planes 3-7 \item[{\em out\-Plane}]desired plane in out\-Image \item[{\em hwidth}]interpolation halfwidth (1 or 2 usually OK, 4 max) \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilInterpolateImageZern@{ObitImageUtilInterpolateImageZern}}
\index{ObitImageUtilInterpolateImageZern@{ObitImageUtilInterpolateImageZern}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Interpolate\-Image\-Zern ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} $\ast$ {\em in\-Plane}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf olong} {\em hwidth}, {\bf olong} {\em n\-Zern}, {\bf ofloat} $\ast$ {\em ZCoef}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a7}


Public: Interpolate pixels in one image to another with Zernike corrections. 

There is no interpolation between planes \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to be interpolated. \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em in\-Plane}]desired plane in in\-Image, 1-rel pixel numbers on planes 3-7 \item[{\em out\-Plane}]desired plane in out\-Image \item[{\em hwidth}]interpolation halfwidth (1 or 2 usually OK, 4 max) \item[{\em n\-Zern}]Number of Zernike terms, can handle up to 17 \item[{\em ZCoef}]Array of Zernike coefficients (piston ignored) \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilInterpolateWeight@{ObitImageUtilInterpolateWeight}}
\index{ObitImageUtilInterpolateWeight@{ObitImageUtilInterpolateWeight}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Interpolate\-Weight ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Weight}, gboolean {\em mem\-Only}, {\bf olong} {\em radius}, {\bf olong} $\ast$ {\em in\-Plane}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf olong} {\em hwidth}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a8}


Public: Interpolate pixels in one image to another giving output weighting. 

Also calculates a weight based on a circle defined by radiusfrom the center; this is 1.0 in the center and tapers with distance$^\wedge$2 to 0.0 outside. If mem\-Only then the input image plane is assumed in in\-Image and only memory resident parts of out\-Image and out\-Weight are modified. There is no interpolation between planes \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to be interpolated. \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em out\-Weight}]Weight image to be written. Must be previously instantiated and have same geometry as out\-Image. \item[{\em mem\-Only}]if TRUE then work only in memory \item[{\em radius}]Radius in pixels of weighting circle \item[{\em in\-Plane}]Desired plane in in\-Image, 1-rel pixel numbers on planes 3-7; ignored if mem\-Only \item[{\em out\-Plane}]Desired plane in out\-Image; ignored if mem\-Only \item[{\em hwidth}]Interpolation halfwidth (1 or 2 usually OK, 4 max) \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilMakeCube@{ObitImageUtilMakeCube}}
\index{ObitImageUtilMakeCube@{ObitImageUtilMakeCube}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Make\-Cube ({\bf Obit\-Image\-Desc} $\ast$ {\em in\-Desc}, {\bf Obit\-UVDesc} $\ast$ {\em UVDesc}, {\bf Obit\-Image\-Desc} $\ast$ {\em out\-Desc}, gchar $\ast$ {\em Stokes}, {\bf olong} {\em bchan}, {\bf olong} {\em echan}, {\bf olong} {\em incr}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a15}


Public: Define an Image freq cube descriptor from a single plane and uv Descriptors. 

This should be called before the image is Opened or instantiated. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Desc}]Input Image Descriptor. \item[{\em UVDesc}]Input UV Descriptor. \item[{\em out\-Desc}]Output Image Descriptor \item[{\em Stokes}]Stokes parameter of image ' '=$>$'I', (I, Q, U, V, R, L) \item[{\em bchan}]first (1-rel) channel in UVDesc \item[{\em echan}]highest (1-rel) channel in UVDesc \item[{\em incr}]channel increment in input \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilMakeImage@{ObitImageUtilMakeImage}}
\index{ObitImageUtilMakeImage@{ObitImageUtilMakeImage}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Make\-Image ({\bf Obit\-UV} $\ast$ {\em in\-UV}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} {\em channel}, gboolean {\em do\-Beam}, gboolean {\em do\-Weight}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a2}


Public: Fill an image with an image made from from uv data. 

Uses (creating if necessary) the my\-Grid member of out. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-UV}]Input uv data. Should be in form of stokes to be imaged will all calibration and selection applied and any weighting applied. \item[{\em out\-Image}]Image to be written. Must be previously instantiated. Beam normalization factor is written to output Beam info\-List as SUMWTS \item[{\em do\-Beam}]if TRUE also make beam. Will make the my\-Beam member of out\-Image. If FALSE, and my\-Grid-$>$Beam\-Norm 0.0 then reads SUMWTS value from beam infolist \item[{\em do\-Weight}]if TRUE Apply uniform weighting corrections to uvdata before imaging. Weighting parameters on in\-UV: \begin{itemize}
\item \char`\"{}nu\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}U\char`\"{} pixels in weighting grid. [defaults to \char`\"{}nx\char`\"{}] \item \char`\"{}nv\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}V\char`\"{} pixels in weighting grid. \item \char`\"{}Wt\-Box\char`\"{} OBIT\_\-long scalar = Size of weighting box in cells [def 1] \item \char`\"{}Wt\-Func\char`\"{} OBIT\_\-long scalar = Weighting convolution function [def. 1] 1=Pill box, 2=linear, 3=exponential, 4=Gaussian if positive, function is of radius, negative in u and v. \item \char`\"{}x\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in X in asec. \item \char`\"{}y\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in Y in asec. \item \char`\"{}UVTaper\char`\"{} OBIT\_\-float scalar = UV taper width in kilowavelengths. [def. no taper]. NB: If the taper is applied her is should not also be applied in the imaging step as the taper will be applied to the output data. \item \char`\"{}Robust\char`\"{} OBIT\_\-float scalar = Briggs robust parameter. [def. 0.0] $<$ -7 -$>$ Pure Uniform weight, $>$7 -$>$ Pure natural weight. Uses AIPS rather than Briggs definition of Robust. \item \char`\"{}Wt\-Power\char`\"{} OBIT\_\-float scalar = Power to raise weights to. [def = 1.0] Note: a power of 0.0 sets all the output weights to 1 as modified by uniform/Tapering weighting. Applied in determinng weights as well as after. \end{itemize}
\item[{\em channel}]Which frequency channel to image, 0-$>$all. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilMakeImageFileInfo@{ObitImageUtilMakeImageFileInfo}}
\index{ObitImageUtilMakeImageFileInfo@{ObitImageUtilMakeImageFileInfo}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Make\-Image\-File\-Info ({\bf Obit\-Info\-List} $\ast$ {\em in\-List}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a4}


Public: Make an image from from uv data, info in {\bf Obit\-Info\-List}{\rm (p.\,\pageref{structObitInfoList})}. 

Grids, FFTs and makes corrections for the gridding convolution. This interface allows multi-processing and/or multi-threading. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-List}]Input File Info\-List Input UV data prefix = \char`\"{}Img\-UV\char`\"{} Input uv data. Should be in form of stokes to be imaged will all calibration and selection applied and any weighting applied. Weighting/Imaging parameters on in\-List copied to uvdata: \begin{itemize}
\item \char`\"{}nu\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}U\char`\"{} pixels in weighting grid. [defaults to \char`\"{}nx\char`\"{}] \item \char`\"{}nv\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}V\char`\"{} pixels in weighting grid. \item \char`\"{}Wt\-Box\char`\"{} OBIT\_\-long scalar = Size of weighting box in cells [def 1] \item \char`\"{}Wt\-Func\char`\"{} OBIT\_\-long scalar = Weighting convolution function [def. 1] 1=Pill box, 2=linear, 3=exponential, 4=Gaussian if positive, function is of radius, negative in u and v. \item \char`\"{}x\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in X in asec. \item \char`\"{}y\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in Y in asec. \item \char`\"{}UVTaper\char`\"{} OBIT\_\-float scalar = UV taper width in kilowavelengths. [def. no taper]. NB: If the taper is applied her is should not also be applied in the imaging step as the taper will be applied to the output data. \item \char`\"{}Robust\char`\"{} OBIT\_\-float scalar = Briggs robust parameter. [def. 0.0] $<$ -7 -$>$ Pure Uniform weight, $>$7 -$>$ Pure natural weight. Uses AIPS rather than Briggs definition of Robust. \item \char`\"{}Wt\-Power\char`\"{} OBIT\_\-float scalar = Power to raise weights to. [def = 1.0] Note: a power of 0.0 sets all the output weights to 1 as modified by uniform/Tapering weighting. Applied in determining weights as well as after.\end{itemize}
Output Image prefix = \char`\"{}Out\-Img\char`\"{} Image to be written. Must be previously defined. Beam normalization factor is written to output Beam info\-List as SUMWTS \char`\"{}do\-Beam\char`\"{} gboolean if TRUE also make beam. Will make the my\-Beam member of [Def F] out\-Image. If FALSE, and my\-Grid-$>$Beam\-Norm 0.0 then reads SUMWTS value from beam infolist \char`\"{}do\-Weight\char`\"{} gboolean if TRUE Apply uniform weighting corrections to uvdata before imaging. [Def F] \char`\"{}do\-Flatten\char`\"{} gboolean if TRUE Flatten mosaic when done [Def F] \char`\"{}field\char`\"{} olong Which field (1-rel) to Image, 0=$>$ all [def 0]\end{description}
\end{Desc}
Output Beam prefix (if do\-Beam) = \char`\"{}Out\-Beam\char`\"{} Image to be written. Must be previously defined. If do\-Beam=FALSE, the following must be given in in\-List: \char`\"{}SUMWTSnnnn\char`\"{} float Beam normalization factor where nn is the 1-rel field number - returned if do\-Beam=TRUE \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilMakeImagePar@{ObitImageUtilMakeImagePar}}
\index{ObitImageUtilMakeImagePar@{ObitImageUtilMakeImagePar}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Make\-Image\-Par ({\bf Obit\-UV} $\ast$ {\em in\-UV}, {\bf olong} {\em n\-Par}, {\bf Obit\-Image} $\ast$$\ast$ {\em out\-Image}, gboolean {\em do\-Beam}, gboolean {\em do\-Weight}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a3}


Public: Parallel fill images with those image made from from uv data. 

Uses (creating if necessary) the my\-Grid member of out. If calibration is being applied, a UV data opject will be open for each image and beam; this may blow the limit on open file descriptors. Images all channels selected together. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-UV}]Input uv data. Should be in form of stokes to be imaged will all calibration and selection applied and any weighting applied. If calibration is specified then info\-List element \char`\"{}Par\-Gain\-Use\char`\"{} (int), if present gives image specifies calibration table numbers. One value is used for all or oner per image \item[{\em n\-Par}]Number of parallel images \item[{\em out\-Image}]Array of Images to be written. Must be previously instantiated. Beam normalization factor is written to output Beam info\-List as \char`\"{}SUMWTS\char`\"{} \item[{\em do\-Beam}]if TRUE also make beam. Will make the my\-Beam member of out\-Image. If FALSE, and my\-Grid-$>$Beam\-Norm 0.0 then reads SUMWTS value from beam infolist If an image does not have a beam one is always made. \item[{\em do\-Weight}]if TRUE Apply uniform weighting corrections to uvdata before imaging. Weighting parameters on in\-UV: \begin{itemize}
\item \char`\"{}nu\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}U\char`\"{} pixels in weighting grid. [defaults to \char`\"{}nx\char`\"{}] \item \char`\"{}nv\-Grid\char`\"{} OBIT\_\-long scalar = Number of \char`\"{}V\char`\"{} pixels in weighting grid. \item \char`\"{}Wt\-Box\char`\"{} OBIT\_\-long scalar = Size of weighting box in cells [def 1] \item \char`\"{}Wt\-Func\char`\"{} OBIT\_\-long scalar = Weighting convolution function [def. 1] 1=Pill box, 2=linear, 3=exponential, 4=Gaussian if positive, function is of radius, negative in u and v. \item \char`\"{}x\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in X in asec. \item \char`\"{}y\-Cells\char`\"{} OBIT\_\-float scalar = Image cell spacing in Y in asec. \item \char`\"{}UVTaper\char`\"{} OBIT\_\-float scalar = UV taper width in kilowavelengths. [def. no taper]. NB: If the taper is applied her is should not also be applied in the imaging step as the taper will be applied to the output data. \item \char`\"{}Robust\char`\"{} OBIT\_\-float scalar = Briggs robust parameter. [def. 0.0] $<$ -7 -$>$ Pure Uniform weight, $>$7 -$>$ Pure natural weight. Uses AIPS rather than Briggs definition of Robust. \item \char`\"{}Wt\-Power\char`\"{} OBIT\_\-float scalar = Power to raise weights to. [def = 1.0] Note: a power of 0.0 sets all the output weights to 1 as modified by uniform/Tapering weighting. Applied in determinng weights as well as after. \end{itemize}
\item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilPBApply@{ObitImageUtilPBApply}}
\index{ObitImageUtilPBApply@{ObitImageUtilPBApply}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-PBApply ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em pnt\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} $\ast$ {\em in\-Plane}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf ofloat} {\em ant\-Size}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a10}


Public: Multiply an image by the primary beam pattern of another. 

For frequencies $<$ 1 GHz uses the VLA polynomial gain curves, for higher frequencies, it uses a jinc function based on the antenna size. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to be corrected \item[{\em pnt\-Image}]Image with pointing position \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em in\-Plane}]Desired plane in in\-Image, 1-rel pixel numbers on planes 3-7; ignored if mem\-Only \item[{\em out\-Plane}]Desired plane in out\-Image; ignored if mem\-Only \item[{\em ant\-Size}]Antenna size \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilPBCorr@{ObitImageUtilPBCorr}}
\index{ObitImageUtilPBCorr@{ObitImageUtilPBCorr}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-PBCorr ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em pnt\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} $\ast$ {\em in\-Plane}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf ofloat} {\em ant\-Size}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a9}


Public: Correct (divide) an image by the primary beam pattern of another. 

For frequencies $<$ 1 GHz uses the VLA polynomial gain curves, for higher frequencies, it uses a jinc function based on the antenna size. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to be corrected \item[{\em pnt\-Image}]Image with pointing position \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em in\-Plane}]Desired plane in in\-Image, 1-rel pixel numbers on planes 3-7; ignored if mem\-Only \item[{\em out\-Plane}]Desired plane in out\-Image; ignored if mem\-Only \item[{\em ant\-Size}]Antenna size, used to correct beam for freq$>$1 GHz, def. 25m. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilPBImage@{ObitImageUtilPBImage}}
\index{ObitImageUtilPBImage@{ObitImageUtilPBImage}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-PBImage ({\bf Obit\-Image} $\ast$ {\em pnt\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf olong} $\ast$ {\em out\-Plane}, {\bf ofloat} {\em ant\-Size}, {\bf ofloat} {\em min\-Gain}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a11}


Public: Fill image with the primary beam pattern. 

For frequencies $<$ 1 GHz uses the VLA polynomial gain curves, for higher frequencies, it uses a jinc function based on the antenna size. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pnt\-Image}]Image with pointing position \item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em out\-Plane}]Desired plane in out\-Image on planes 3-5; ignored if mem\-Only \item[{\em ant\-Size}]Antenna size \item[{\em min\-Gain}]Min. allowed antenna gain, lower values are blanked \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilQuanFITS@{ObitImageUtilQuanFITS}}
\index{ObitImageUtilQuanFITS@{ObitImageUtilQuanFITS}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Obit\-Image}$\ast$ Obit\-Image\-Util\-Quan\-FITS ({\bf Obit\-Image} $\ast$ {\em in\-Image}, gchar $\ast$ {\em file\-Name}, {\bf olong} {\em disk}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a14}


Public: Quantize an {\bf Obit\-Image}{\rm (p.\,\pageref{structObitImage})} and write to a FITS image. 

Image RMS derived from histogram fitting and should be a reasonable estimate of the \char`\"{}noise\char`\"{}. Selection by blc, trc in in\-Image is honored. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Image to quantize, parameters in info: \begin{itemize}
\item \char`\"{}factor\char`\"{} OBIT\_\-float (1,1,1) quantize at factor$\ast$RMS [def 0.2] RMS is the minimum rms in any selected plane. \item \char`\"{}quant\char`\"{} OBIT\_\-float (1,1,1) quantization level, has presidence over factor, def.(or $<$=0) use factor \end{itemize}
\item[{\em file\-Name}]output FITS image file name \item[{\em disk}]output FITS directory number \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pointer to the new object, may be NULL on failure. \end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilSelCopy@{ObitImageUtilSelCopy}}
\index{ObitImageUtilSelCopy@{ObitImageUtilSelCopy}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Sel\-Copy ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a19}


Public: Copy with selection by pixel increment. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Input image Parameters in info: \begin{itemize}
\item \char`\"{}BLC\char`\"{} OBIT\_\-long (7) Lowest x,y,v pixel number selected [def 1,1,1] \item \char`\"{}TRC\char`\"{} OBIT\_\-long (7) Highest x,y,v pixel number selected [def all] \item \char`\"{}inc\char`\"{} OBIT\_\-long (7) Pixel increment on each axis [def all 1] \end{itemize}
\item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilUV2ImageDesc@{ObitImageUtilUV2ImageDesc}}
\index{ObitImageUtilUV2ImageDesc@{ObitImageUtilUV2ImageDesc}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-UV2Image\-Desc ({\bf Obit\-UVDesc} $\ast$ {\em UVDesc}, {\bf Obit\-Image\-Desc} $\ast$ {\em image\-Desc}, {\bf olong} {\em nchavg})}\label{ObitImageUtil_8h_a5}


Public: Convert an {\bf Obit\-UVDesc}{\rm (p.\,\pageref{structObitUVDesc})} to an {\bf Obit\-Image\-Desc}{\rm (p.\,\pageref{structObitImageDesc})}. 

Needs any xshift an y shift filled into the image prior to call. Information about the first two axes other than the type an coordinate value need to be set separately. to get the final position correct. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em UVDesc}]Input UV Descriptor. \item[{\em image\-Desc}]Output image Descriptor \item[{\em nchavg}]How many uv channels to average per image channel. Ignored if uv data has multiple IFs. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilUVFilter@{ObitImageUtilUVFilter}}
\index{ObitImageUtilUVFilter@{ObitImageUtilUVFilter}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-UVFilter ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf ofloat} {\em radius}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a20}


Public: Filter out of band noise. 

Intended to filter out out of band noise in single dish images. Filters by a function with 1.0/(nx$\ast$ny) inside radius and outside tapers by an exponential with scale distance 10 pixels. \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Input Image \item[{\em out\-Image}]Output image, may be in\-Image \item[{\em radius}]distance from origin in uv space (m) \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
\index{ObitImageUtil.h@{Obit\-Image\-Util.h}!ObitImageUtilVel@{ObitImageUtilVel}}
\index{ObitImageUtilVel@{ObitImageUtilVel}!ObitImageUtil.h@{Obit\-Image\-Util.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Obit\-Image\-Util\-Vel ({\bf Obit\-Image} $\ast$ {\em in\-Image}, {\bf Obit\-Image} $\ast$ {\em out\-Image}, {\bf Obit\-Err} $\ast$ {\em err})}\label{ObitImageUtil_8h_a18}


Public: Flux weighted velocity image from Cube. 

Input image is clipped to only significant pixels. Convolution of each plane by Parms[3] cells used to mask image \begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em in\-Image}]Input velocity cube image Parameters in info: \begin{itemize}
\item \char`\"{}BLC\char`\"{} OBIT\_\-long (7) Lowest x,y,v pixel number selected [def 1,1,1] \item \char`\"{}TRC\char`\"{} OBIT\_\-long (7) Highest x,y,v pixel number selected [def all] Note: the first two output axes will have an even number of pixels. \item \char`\"{}Parms\char`\"{} OBIT\_\-float (4) Parameters [0] min. RMS (convolved image) [1] min. fraction of peak [2] $<$0.5 =$>$ blank fill, else zero fill [3] Convolution size (0-$>$5) \end{itemize}
\item[{\em out\-Image}]Image to be written. Must be previously instantiated. \item[{\em err}]Error stack, returns if not empty. \end{description}
\end{Desc}
