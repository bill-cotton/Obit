<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ObitUVEdit.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000001.html">include</a></div>
<h1>ObitUVEdit.h File Reference</h1>ObitUVEdit module definition for editing <a class="el" href="structObitUV.html">ObitUV</a> data. <a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="ObitErr_8h-source.html">ObitErr.h</a>"</code><br>
<code>#include "<a class="el" href="ObitUV_8h-source.html">ObitUV.h</a>"</code><br>

<p>
<a href="ObitUVEdit_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a0">ObitUVEditTD</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Time domain editing, FG table out.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a1">ObitUVEditTDRMSAvg</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Time domain RMS/Avg editing, FG table out.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a2">ObitUVEditFD</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Frequency domain editing, FG table out.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a3">ObitUVEditStokes</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Edit by excessive amplitude in given Stokes, FG table out.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a4">ObitUVEditClip</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, gboolean scratch, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Clip raw visibilities, uv data out.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a5">ObitUVEditClipStokes</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, gboolean scratch, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Flag visibilities by Stokes, uv data out.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ObitUVEdit_8h.html#a6">ObitUVEditMedian</a> (<a class="el" href="structObitUV.html">ObitUV</a> *inUV, <a class="el" href="structObitUV.html">ObitUV</a> *outUV, <a class="el" href="structObitErr.html">ObitErr</a> *err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public: Flag visibilities by running median.  <a href="#a6"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
ObitUVEdit module definition for editing <a class="el" href="structObitUV.html">ObitUV</a> data. 
<p>
This utility module contains utility functions for editing uv data.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a4" doxytag="ObitUVEdit.h::ObitUVEditClip"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a>* ObitUVEditClip           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>gboolean&nbsp;</td>
          <td class="mdname" nowrap> <em>scratch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Clip raw visibilities, uv data out. 
<p>
Writes edited UV data Control parameters are on the inUV info member: <ul>
<li>"maxAmp" OBIT_float (1,1,1) Maximum allowed amplitude </li>
<li>"oper" OBIT_string (4,1,1) operation type: "flag" flag data with amplitudes in excess of maxAmp "clip" clip amplitudes at maxAmp and preserve phase default is "flag" <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to clip. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scratch</em>&nbsp;</td><td>True if scratch file desired, will be same type as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>If not scratch, then the previously defined output file May be the same as inUV. May be NULL for scratch only If it exists and scratch, it will be Unrefed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if not empty. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the clipped <a class="el" href="structObitUV.html">ObitUV</a>. </dd></dl>
</li>
</ul>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ObitUVEdit.h::ObitUVEditClipStokes"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a>* ObitUVEditClipStokes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>gboolean&nbsp;</td>
          <td class="mdname" nowrap> <em>scratch</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Flag visibilities by Stokes, uv data out. 
<p>
Writes edited UV data Data with amplitudes of the selected stokes in excess of maxAmp are flagged. Optionally all correlations associated may be flagged. Stokes conversion as needed for test. Control parameters are on the inUV info member: <ul>
<li>"flagStok" OBIT_string (1,1,1) Stokes value to clip (I, Q, U, V, R, L) default = "I" </li>
<li>"flagAll" Obit_bool (1,1,1) if true, flag all associated correlations default = True </li>
<li>"maxAmp" OBIT_float (1,1,1) Maximum allowed amplitude</li>
</ul>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to clip. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scratch</em>&nbsp;</td><td>True if scratch file desired, will be same type as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>If not scratch, then the previously defined output file May be the same as inUV. May be NULL for scratch only If it exists and scratch, it will be Unrefed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if not empty. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the clipped <a class="el" href="structObitUV.html">ObitUV</a>. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ObitUVEdit.h::ObitUVEditFD"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ObitUVEditFD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Frequency domain editing, FG table out. 
<p>
Editing is done independently for each visibility measure. First clipping is done on correlator and Vpol amplitudes. Following this, an average and RMS is determined for each channel in each timeAvg period and a spectral baseline is established for the average values, either using a median window filter (FDwidMW&gt;0) or a linear baseline fit (FDwidMW&lt;=0) to specified channels. Channels with excessive RMSes or residual amplitudes are flagged. Flagging is done by entering the offending data in FG table flagTab on outUV. Routine adopted from the AIPSish FDEDIT.FOR/FDEDIT <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Name of input uvdata object. Any prior selection and editing is applied. Control parameters on info member of inUV: <ul>
<li>"flagTab" OBIT_int (1,1,1) FG table version number [ def. 1] </li>
<li>"timeAvg" OBIT_float (1,1,1) Time interval over which to average data to be flagged (min) [def = 1 min.] NB: this should be at least 2 integrations. </li>
<li>"FDmaxAmp" OBIT_float (1,1,1) Maximum average amplitude allowed in the spectrum before fitting. Any channel exceeding this is flagged in advance. default -&gt; infinite </li>
<li>"FDmaxV" OBIT_float (1,1,1) Maximum average amplitude allowed in V polarization; any channel exceeding this is flagged in advance of the baseline fitting or median filtering, Calculates V from difference in amplitudes. default -&gt; infinite </li>
<li>"FDwidMW" OBIT_int (1,1,1) If &gt; 0 the width of the median window in channels. An odd number (5) is recommended, default or 0 -&gt; linear baseline </li>
<li>"FDmaxRMS" OBIT_float (2,1,1) Flag all channels having RMS values &gt; maxRMS[0] of the channel median sigma.[default =&gt; 6.] plus maxRMS[1] (default 0.1) of the channel average in quadrature </li>
<li>"FDmaxRes" OBIT_float (1,1,1) Max. residual flux in sigma allowed for channels outside the baseline fitting regions. default =&gt; 6. </li>
<li>"FDmaxResBL" OBIT_float (1,1,1) Max. residual flux in sigma allowed for channels within the baseline fitting regions. Default = FDmaxRes </li>
<li>"FDbaseSel" OBIT_int (4,*,1) Channel selection to define spectral baseline Used only for linear baseline fitting. Select groups of channels/IF(s) to fit as sets of (Start,end,inc,IF), i.e., FDbaseSel = 6,37,1,0, 92,123,1,0 for two regions applying to all IFs. Channel and IF numbers 1 -rel The first group for which the end channel == 0 terminates the list Channel increments defaults to 1 If the IF==0 then the group applies to all IF. Default is channels 2 =&gt; nchan-1 all IFs </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>UV data onto which the FG table is to be attached. May be the same as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if not empty. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ObitUVEdit.h::ObitUVEditMedian"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ObitUVEditMedian           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Flag visibilities by running median. 
<p>
A running estimate of the amplitude of each baseline/correlation is determined using a quasi median window (alpha is used to control) filter. Amplitudes in excess of flagSig time a robust RMS in the window will be flagged. Data to be flagged are indicated in FG table flagTab on outUV. Control parameters are on the inUV info member: <ul>
<li>"flagTab" OBIT_int (1,1,1) FG table version number [ def. 1] NB: this should not also being used to flag the input data! </li>
<li>"flagSig" OBIT_float (1,1,1) Sigma in window for flagging [def 10] </li>
<li>"alpha" OBIT_float (1,1,1) controls averaging [0.5] 0 -&gt; 1 = pure boxcar -&gt; pure MWF (alpha of the center data samples are ignored and the rest averaged). </li>
<li>"timeWind" OBIT_float (1,1,1) Window size (days) over which to determine medians, RMSes [1 min] </li>
<li>"timeAvg" OBIT_float (1,1,1) Previous averaging time in min if defaulted, determined from data. </li>
<li>"begIF" OBIT_int (1,1,1) First IF in data [ def. 1] This takes into account any previous selection </li>
<li>"begChan" OBIT_int (1,1,1) First channel in data [ def. 1]</li>
</ul>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to edit. Any prior selection/calibration applied. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>UV data onto which the FG table is to be attached. Channels, IS and polarizations will be appropriate for outUV May be the same as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if not empty. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ObitUVEdit.h::ObitUVEditStokes"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ObitUVEditStokes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Edit by excessive amplitude in given Stokes, FG table out. 
<p>
If a fraction of bad baselines on any antenna/channel/IF exceeds maxBad, then all data to that correlator is flagged. The actual clipping level is the lesser of maxAmp[0] and if maxAmp[1]&lt;=0, a value determined from a statistical analysis of each interval intended to flag the most discrepant 3 percent of the data. Flagging entries are written into FG table flagTab. Results are unpredictable for uncalibrated data. Control parameters on info member of inUV: <ul>
<li>"flagStok" OBIT_string (1,1,1) Stokes value to clip (I, Q, U, V, R, L) default = "V" </li>
<li>"flagTab" OBIT_int (1,1,1) FG table version number [ def. 1] NB: this should not also being used to flag the input data! </li>
<li>"timeAvg" OBIT_float (1,1,1) Time interval over which to determine data to be flagged (min) [def = 1 min.] </li>
<li>"maxAmp" OBIT_float (2,1,1) Maximum value allowed [0] = clipping level, [1]==0.0 use statistical level </li>
<li>"maxBad" OBIT_float (1,1,1) Fraction of allowed flagged baselines to an antenna above which all baselines are flagged. [default 0.25]</li>
</ul>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to edit. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>UV data onto which the FG table is to be attached. May be the same as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if not empty. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ObitUVEdit.h::ObitUVEditTD"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ObitUVEditTD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Time domain editing, FG table out. 
<p>
All correlations are clipped on each baseline if the RMS is larger than the maximum. The clipping is done independently in each time interval defined by timeAvg. The clipping level is given by MIN (A, MAX (B,C)) where: A = sqrt (maxRMS[0]**2 + (avg_amp * maxRMS[1])**2) and avg_amp is the average amplitude on each baseline. B = median RMS + 3 * sigma of the RMS distribution. C = level corresponding to 3% of the data. Usage of C is controlled by doHiEdit All data on a given baseline/correlator are flagged if the RMS exceeds the limit. If a fraction of bad baselines on any correlator exceeds maxBad, then all data to that correlator is flagged. In addition, if the offending correlator is a parallel hand correlator then any corresponding cross hand correlations are also flagged. Flagging entries are written into FG table flagTab. Control parameters on info member of inUV: <ul>
<li>"flagTab" OBIT_int (1,1,1) FG table version number [ def. 1] </li>
<li>"timeAvg" OBIT_float (1,1,1) Time interval over which to determine data to be flagged (min) [def = 1 min.] NB: this should be at least 2 integrations. </li>
<li>"maxRMS" OBIT_float (2,1,1) Maximum RMS allowed, constant plus amplitude coefficient. </li>
<li>"maxBad" OBIT_float (1,1,1) Fraction of allowed flagged baselines to a poln/channel/IF above which all baselines are flagged. [default 0.25] </li>
<li>"doHiEdit" OBIT_boolean (1,1,1) If present and TRUE, flag based on statistics [def FALSE] Routine adapted from the AIPSish TDEDIT.FOR/TDEDIT <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to edit. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>UV data onto which the FG table is to be attached. May be the same as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if error. </td></tr>
  </table>
</dl>
</li>
</ul>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ObitUVEdit.h::ObitUVEditTDRMSAvg"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ObitUVEditTDRMSAvg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>inUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitUV.html">ObitUV</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>outUV</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structObitErr.html">ObitErr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>err</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Public: Time domain RMS/Avg editing, FG table out. 
<p>
The clipping is done independently in each time interval defined by timeAvg. The clipping level is given by maxRMSAvg All data on a given baseline/correlator are flagged if the RMS exceeds the limit. If a fraction of bad baselines on any correlator exceeds maxBad, then all data to that correlator is flagged. In addition, if the offending correlator is a parallel hand correlator then any corresponding cross hand correlations are also flagged. Flagging entries are written into FG table flagTab. Control parameters on info member of inUV: <ul>
<li>"flagTab" OBIT_int (1,1,1) FG table version number [ def. 1] </li>
<li>"timeAvg" OBIT_float (1,1,1) Time interval over which to determine data to be flagged (min) [def = 1 min.] NB: this should be at least 2 integrations. </li>
<li>"maxRMSAvg" OBIT_float (1,1,1) Maximum RMS/avg allowed </li>
<li>"maxBad" OBIT_float (1,1,1) Fraction of allowed flagged baselines to a poln/channel/IF above which all baselines are flagged. [default 0.25]</li>
</ul>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inUV</em>&nbsp;</td><td>Input uv data to edit. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outUV</em>&nbsp;</td><td>UV data onto which the FG table is to be attached. May be the same as inUV. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>Error stack, returns if error. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jul 20 08:52:42 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
